title: list
tags:
color: white
group: room0
position: 14,-1473
---
//this is a list of every variable in the game and in its original state - running this node resets the game

<<declare $actions = 42>>
<<set $actions = 42>>



<<declare $marzanna = true>> //true means the character is alive, false means they are dead
<<declare $hugh = true>>
<<declare $mathilda = true>>
<<declare $nanditha = true>>
<<declare $ashok = true>>

<<declare $trap1tools = false>> //false means a trap is idle, true means the trap has been triggered
<<declare $trap2window = false>>
<<declare $trap3bookcase = false>>
<<declare $trap4effigies = false>>
<<declare $trap5generator = false>>

<<declare $door3book = false>> //if this door turns true, the bookshelf has moved and the safe can be accessed
<<declare $door3safe = false>>  //if this door turns true, the surviving characters escape, it's one of the endings

<<declare $door12 = false>> //the numbers indicate which rooms are connected by that door - this one leads from room 1 to room 2, false means a door is closed
<<declare $door23 = false>> 
<<declare $door34 = false>>
<<declare $door45 = false>>
<<declare $door51 = false>>


<<declare $key12 = false>> //the numbers indicate which door this key is for, false means it hasn't been found yet
<<declare $key23 = false>> 
<<declare $key34 = false>>
<<declare $key45 = false>>
<<declare $key51 = false>>

<<declare $backupkey34 = false>>
<<declare $backupkey51 = false>>

<<declare $lock1 = false>>
<<declare $lock2 = false>>
<<declare $lock3 = false>>
<<declare $lock4 = false>>
<<declare $lock5 = false>>

<<declare $item1eye = false>> //if an item is false, its sprite is still visible in the scene because it has not been picked up yet - if it turns true, the sprite will be removed and the item's entry sprite should be added to the notebook
<<declare $item1letter = false>> 

<<declare $item2remote = false>>
<<declare $item2carrot = false>>

<<declare $item3code = false>>
<<declare $item3key = false>>

<<declare $item4grimoire = false>>
<<declare $item4candle = false>>

<<declare $item5finger = false>>
<<declare $item5card = false>>

<<declare $light = true>> //as long as the light is true, the player can see everything, if it turns false, the scene will turn to black (except for the UI) and objects have to be found by blindly searching for interactive objects in the dark (indicated by the changing cursor)
<<declare $candle = false>> //the candle is an alternative light source - as long as it is true, the rooms will not be dark (but have a filter that makes it look darker than usual)

===

title: room0
tags:
color: white
group: room0
position: 14,-1321
---
//<<setLightIntensity>>
<<enableScene1>>

<<emotionsprite "emotionashok_idle" "a_idle">> 
<<playrestsound ashok "ashok">>
Ashok: Hmmm... Where am I?
<<emotionsprite  "emotionnanditha_idle" "n_idle">> 
<<playrestsound nanditha "nanditha">>
Nanditha: Ashok! Good, I'm not alone.
<<emotionsprite "emotionhugh_idle" "h_idle">> 
<<playrestsound hugh "hugh">>
Hugh: Hey, keep it down! Some people want to sleep.
<<emotionsprite "emotionashok_idle" "a_idle">> 
<<playrestsound ashok "ashok">>
Ashok: Do you know where we are?
<<emotionsprite  "emotionnanditha_idle" "n_idle">> 
<<playrestsound nanditha "nanditha">>
Nanditha: I don't remember much but... probably someones living room?
<<emotionsprite "emotionmathilda_idle" "mt_idle">> 
<<playrestsound mathilda "mathilda">>
Mathilda: Urgh I hate sleeping on the floor.
<<emotionsprite  "emotionnanditha_happy" "n_happy">> 
<<playrestsound nanditha "nanditha">>
Nanditha: Mathilda! Do you know how we got here?
<<emotionsprite "emotionhugh_idle" "h_idle">> 
<<playrestsound hugh "hugh">>
Hugh: Classic story: went to a party, drank to much, slept in at a random place, lost memory in the morning.
<<emotionsprite "emotionashok_annoyed" "a_annoyed">> 
<<playrestsound ashok "ashok">>
Ashok: Noone asked you, Hugh.
<<emotionsprite "emotionmathilda_idle" "mt_idle">> 
<<playrestsound mathilda "mathilda">>
Mathilda: He might be right though.
<<emotionsprite  "emotionnanditha_idle" "n_idle">> 
<<playrestsound nanditha "nanditha">>
Nanditha: Let's search for a light switch or something, it's so dark in here, I can't even see you guys.
<<destroyemotion "emotionnanditha_idle" "n_idle">>

-> Find a way out. //continue with room0_exit when clicking on the door
//<<activateLightIntensity>>
//<<jump room0_exit>>
===

title: room0_exit
tags:
color: white
group: room0
position: 14,-1154
---
<<activateemotion "emotionnanditha_idle" "n_idle">>
<<emotionsprite "emotionmarzanna_idle" "mz_idle">> 
<<playrestsound marzanna "marzanna">>
Marzanna: I found a door.
<<emotionsprite "emotionhugh_afraid" "h_afraid">> 
 <<playrestsound hugh "hugh">>
Hugh: You were here the whole time? You creep!
<<emotionsprite "emotionashok_idle" "a_idle">> 
<<playrestsound ashok "ashok">>
Ashok: Shut up, Hugh. Marzanna, can you open it?
<<destroyemotion "emotionashok_idle" "a_idle">>

-> Open the door.
    <<set $actions = $actions - 1>>
   // <<setLightIntensity>>
    <<jump room1_start>>
===

title: room1_start
tags:
color: red
group: room1
position: 18,-742
---
<<disableScene1>>
<<enableScene2>>
<<activateemotion "emotionashok_idle" "a_idle">>
<<emotionsprite "emotionhugh_afraid" "h_afraid">> 
<<playrestsound hugh "hugh">>
Hugh: This is not someone's living room.
<<emotionsprite  "emotionnanditha_afraid" "n_afraid">> 
<<playrestsound nanditha "nanditha">>
Nanditha: Maybe it's a prank.
<<emotionsprite "emotionmathilda_afraid" "mt_afraid">> 
<<playrestsound mathilda "mathilda">>
Mathilda: Is that a human body?!?
<<destroyemotion "emotionmathilda_afraid" "mt_afraid">>

<<flickerlights>>// <<start transition>> //lights flicker and go out

<<activateemotion "emotionmathilda_afraid" "mt_afraid">>
<<emotionsprite "emotionmarzanna_afraid" "mz_afraid">> 
<<playrestsound marzanna "marzanna">>
Marzanna: Oh nooo.
<<emotionsprite "emotionhugh_idle" "h_idle">> 
<<playrestsound hugh "hugh">>
Hugh: And again, we're in the dark. I saw a door over there, we should get out of here. Try not to fall over the corpse.
<<destroyemotion "emotionhugh_idle" "h_idle">>

<<playrestsound background "stumble">> //Ashok stumbles over the corpse and falls

<<activateemotion "emotionhugh_idle" "h_idle">>
<<emotionsprite "emotionmathilda_afraid" "mt_afraid">> 
<<playrestsound mathilda "mathilda">>
Mathilda: What was that?
<<destroyemotion "emotionmathilda_afraid" "mt_afraid">>

<<endflickerlights>> //lights flicker and come back, characters are scattered
<<disableScene2>>
<<enableScene3>>

<<activateemotion "emotionmathilda_afraid" "mt_afraid">>
<<emotionsprite  "emotionnanditha_idle" "n_idle">> 
<<playrestsound nanditha "nanditha">>
Nanditha: Nice, the light is back on again.
<<emotionsprite "emotionashok_afraid" "a_afraid">> 
<<playrestsound ashok "ashok">>
Ashok: Aaaaah! This body is real!
<<emotionsprite "emotionhugh_afraid" "h_afraid">> 
<<playrestsound hugh "hugh">>
Hugh: What the hell is going on here?
<<destroyemotion "emotionhugh_afraid" "h_afraid">>
-> Click on objects to investigate them.
<<jump room_investigate>>
===



title: room2_enter
tags:
color: green
group: room2
position: 279,-598
---
<<flickerlights>> //lights flicker and go out 
<<if visited_count("room2_enter") == 0>>
<<activateemotion "emotionmarzanna_afraid" "mz_afraid">>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
    <<emotionsprite "emotionmarzanna_afraid" "mz_afraid">> 
<<playrestsound marzanna "marzanna">>
    Marzanna: Why is it dark again?
    <<if $mathilda == true>>
        <<enableMathildaCharacter>>
        <<enableCabinet>>
        <<emotionsprite "emotionmathilda_idle" "mt_idle">> 
<<playrestsound mathilda "mathilda">>
        Mathilda: It smells like wet soil...
<<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
<<destroyemotion "emotionmathilda_idle" "mt_idle">>
    <<endif>>
    <<disableScene3>>
    <<enableScene5>>
    <<endflickerlights>> //lights flicker and come back on
<<else>>

<<disableScene3>>
<<enableScene5>>
<<endflickerlights>>
<<endif>>
<<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
<<destroyemotion "emotionmathilda_idle" "mt_idle">>
<<jump room_investigate>>
===

title: room3_enter
tags:
color: yellow
group: room3
position: 538,-598
---
<<flickerlights>>
<<if visited_count("room3_enter") == 0>>
    <<activateemotion "emotionhugh_idle" "h_idle">>
    <<emotionsprite "emotionhugh_idle" "h_idle">> 
<<playrestsound hugh "hugh">>
    <<if $mathilda == true>>
        <<enableMathildaCharacter>>
        <<enableglobe>>
    <<endif>>
     <<if $ashok == true>>
        <<enableAshokCharacter>>
        <<enableletters>>
    <<endif>>
    Hugh: Maybe the doors are connected to the lights somehow.
    <<destroyemotion "emotionhugh_idle" "h_idle">>
    <<disableScene5>>
    <<enableScene6>>
   <<endflickerlights>> //lights flicker and come back on, characters are scattered
    <<jump room_investigate>>
<<else>>
<<disableScene5>>
<<enableScene6>>
<<endflickerlights>>
<<jump room_investigate>>
<<endif>>
===

title: room4_enter
tags:
color: purple
group: room4
position: 794,-611
---
//<<wait 2>>
      <<flickerlights>>
<<if visited_count("room4_enter") == 0>>

 
    <<activateemotion "emotionashok_happy" "a_happy">>
    <<activateemotion "emotionmathilda_annoyed" "mt_annoyed">>
    <<activateemotion "emotionnanditha_annoyed" "n_annoyed">>
     <<if $mathilda == true>>
        <<enableMathildaCharacter>>
        <<enablealtar>>
    <<endif>>
<<if $ashok == true>>
        <<enableAshokCharacter>>
        <<enablegemstone>>
    <<endif>>

    <<if $marzanna == true>>
        <<enableMarzannaCharacter>>
        <<enabledivination>>
    <<endif>>
 
    <<disableScene6>>
  <<enableScene7>>
  
    <<if $candle == false && $item4candle == true && $ashok == true && $mathilda == true>>
        <<emotionsprite "emotionashok_happy" "a_happy">> 
<<playrestsound ashok "ashok">>
        Ashok: Good you brought that candle, Mathilda. It's so helpful now.
        <<emotionsprite "emotionmathilda_annoyed" "mt_annoyed">> 
<<playrestsound mathilda "mathilda">>
        Mathilda: Shut up, Ashok.
       
    <<endif>>
    
    <<if $marzanna == true>>

        <<emotionsprite "emotionmarzanna_idle" "mz_idle">> 
<<playrestsound marzanna "marzanna">>
     
        Marzanna: Darkness awaits wherever we go...
       
     
    <<else>>
    <<destroyemotion "emotionashok_happy" "a_happy">>
    <<destroyemotion "emotionmathilda_annoyed" "mt_annoyed">>
    <<destroyemotion "emotionmarzanna_idle" "mz_idle">>
    ...
    <<endif>>
    <<destroyemotion "emotionmathilda_annoyed" "mt_annoyed">>
    <<destroyemotion "emotionmarzanna_idle" "mz_idle">>
    <<disableScene6>>
  <<enableScene7>>
     //or whichever scene it is - switch from room 3 to room 4
  <<endflickerlights>>
     //lights flicker and come back on, characters are scattered
<<else>>
<<disableScene6>>
  <<enableScene7>>
 <<endflickerlights>>
<<endif>>
<<jump room_investigate>>
===

title: room5_enter
tags:
color: blue
group: room5
position: 1058,-615
---
//<<wait 2>>
      
   <<flickerlights>>
<<if visited_count("room5_enter") == 0>>
<<if $ashok == true>>
        <<enableAshokCharacter>>
        <<enableapparatus>>
    <<endif>>

 <<if $marzanna == true>>
        <<enableMarzannaCharacter>>
        <<enableshelf>>
    <<endif>>
<<if $mathilda == true>>
        <<enableMathildaCharacter>>
        <<enableburner>>
    <<endif>>
    <<if $hugh == true>>
        <<enableHughCharacter>>
        <<enablecage>>
    <<endif>>


    <<activateemotion "emotionnanditha_annoyed" "n_annoyed">>
    <<emotionsprite  "emotionnanditha_annoyed" "n_annoyed">> 
    <<playrestsound nanditha "nanditha">>
    Nanditha: Dash it, the lights went out again!
    <<destroyemotion "emotionnanditha_annoyed" "n_annoyed">>
    <<disableScene7>>
  <<enableScene8>>
    <<endflickerlights>>
   //lights flicker and come back on, characters are scattered
<<else>>
 <<disableScene7>>
  <<enableScene8>>
  <<endflickerlights>>
<<endif>>
<<jump room_investigate>>
===

title: room1_enter
tags:
color: red
group: room1
position: 18,-598
---
//<<flickerlights>>
<<disableScene8>>
<<enableScene3>>
<<if $ashok == true>>
        <<enableAshokCharacter>>
         <<enablecorpse>>
    <<endif>>
 <<if $marzanna == true>>
        <<enableMarzannaCharacter>>
        <<enablechemicals>>
    <<endif>>
<<if $mathilda == true>>
        <<enableMathildaCharacter>>
       <<enabletools>>
    <<endif>>
    <<if $hugh == true>>
        <<enableHughCharacter>>
       <<enablecrate>>
    <<endif>>
    
     <<if $nanditha == true>>
        <<enableNandithaCharacter>>
         <<enableanimal>>
    <<endif>>
<<if visited_count("room1_enter") == 0>>

 <<darkmodeon>>
    <<activateemotion "emotionashok_idle" "a_idle">>
    <<activateemotion "emotionhugh_idle" "h_idle">>
    <<activateemotion "emotionmathilda_annoyed" "mt_annoyed">>
    <<activateemotion "emotionnanditha_happy" "n_happy">>
    <<activateemotion "emotionmarzanna_afraid" "mz_afraid">>
    <<playrestsound extra1scroll_idle "scroll">>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">> 
        <<playrestsound ashok "ashok">>
        Ashok: Did you hear that?
    <<endif>>
    <<if $hugh == true>>
     <<if visited("interaction1crate") == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">> 
        <<playrestsound hugh "hugh">>
        Hugh: I wonder if Dr. Fist tried to install an automation, to switch the lights on whenever a new room is entered but it's not working properly. Or maybe it's supposed to be an energy saving measure.
         <<else>>
        <<emotionsprite "emotionhugh_idle" "h_idle">> 
        <<playrestsound hugh "hugh">>
        Hugh: Maybe this is supposed to be an energy saving measure but it's not working properly.
        <<endif>>
    <<endif>>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_annoyed" "mt_annoyed">> 
        <<playrestsound mathilda "mathilda">>
        Mathilda: How can there be so many rooms?
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_happy" "n_happy">> 
        <<playrestsound nanditha "nanditha">>
        Nanditha: I'm certain we are really close to the exit now.
    <<endif>>
    <<if $marzanna == true>>
        <<emotionsprite "emotionmarzanna_afraid" "mz_afraid">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: Guys, I have a bad feeling about this room. It feels oddly familiar.
    <<endif>>
    <<destroyemotion "emotionashok_idle" "a_idle">>
    <<destroyemotion "emotionhugh_idle" "h_idle">>
    <<destroyemotion "emotionmathilda_annoyed" "mt_annoyed">>
    <<destroyemotion "emotionnanditha_happy" "n_happy">>
    <<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
    //<<disableScene7>> 
    //<<enableScene8>>
  
     <<rollup "extra1scroll_idle" "extra1scroll_triggered">>
    <<darkmodeoff>>
    //The skeleton scroll rolls up and reveals the door on the right edge of room 1(in the dark, so it's not visible) the extra1scroll_idle sprite is replaced by the extra1scroll_triggered sprite, that change is permanent
   // <<endflickerlights>> //lights flicker and come back on, characters are scattered
    <<activateemotion "emotionhugh_afraid" "h_afraid">>
    <<activateemotion "emotionashok_annoyed" "a_annoyed">>
    <<activateemotion "emotionmathilda_afraid" "mt_afraid">>
    <<activateemotion "emotionnanditha_afraid" "n_afraid">>
    <<activateemotion "emotionmarzanna_afraid" "mz_afraid">>
    <<activateemotion "emotionmarzanna_sad" "mz_sad">>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_afraid" "h_afraid">> 
        <<playrestsound hugh "hugh">>
        Hugh: No way!
    <<endif>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_annoyed" "a_annoyed">> 
        <<playrestsound ashok "ashok">>
        Ashok: So we walked in a circle. Great.
    <<endif>>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_afraid" "mt_afraid">> 
        <<playrestsound mathilda "mathilda">>
        Mathilda: But this room only had one door!
        <<if $hugh == true>>
            <<emotionsprite "emotionhugh_idle" "h_idle">> 
            <<playrestsound hugh "hugh">>
            Hugh: Seems like this one was covered by the scroll. That's why we couldn't see it.
        <<endif>>
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_afraid" "n_afraid">> 
        <<playrestsound nanditha "nanditha">>
        Nanditha: This can't be. We must have missed the exit!
        <<if $hugh == true && visited("vault") == true>>
            <<emotionsprite "emotionhugh_idle" "h_idle">> 
            <<playrestsound hugh "hugh">>
            Hugh: The only door we did not open yet is the vault door in the library. It's our last hope now.
            <<if $mathilda == true>>
                <<emotionsprite "emotionmathilda_happy" "mt_happy">> 
                <<playrestsound mathilda "mathilda">>
                Mathilda: Ok, let's find the keys for this vault!
            <<endif>>
        <<endif>>
    <<endif>>
    <<if $ashok == true && visited("vault") == false>>
            <<emotionsprite "emotionashok_annoyed" "a_annoyed">> 
            <<playrestsound ashok "ashok">>
            Ashok: There has to be a hidden door somewhere, we just need to find it!
    <<endif>>
    <<if $marzanna == true>>
    <<if $item5card == true>>
            <<emotionsprite "emotionmarzanna_afraid" "mz_afraid">> 
            <<playrestsound marzanna "marzanna">>
            Marzanna: The Tarot card was right!
        <<endif>>
        <<emotionsprite  "emotionmarzanna_sad" "mz_sad">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: We'll never get out of here.
    <<endif>>
    <<destroyemotion "emotionhugh_afraid" "h_afraid">>
    <<destroyemotion "emotionashok_annoyed" "a_annoyed">>
    <<destroyemotion "emotionmathilda_afraid" "mt_afraid">>
    <<destroyemotion "emotionhugh_idle" "h_idle">>
    <<destroyemotion "emotionnanditha_afraid" "n_afraid">>
    <<destroyemotion "emotionmathilda_happy" "mt_happy">>
    <<destroyemotion "emotionashok_annoyed" "a_annoyed">>
    <<destroyemotion "emotionmarzanna_sad" "mz_sad">>
<<else>>
//<<disableScene8>> //or whichever scene it is - switch from room 5 to room 1
//<<enableScene3>>
//<<endflickerlights>>
<<endif>>
<<jump room_investigate>>
===


title: room_investigate
tags:
color: black
group: common
position: 358,-948
---
<<destroyemotion "emotionashok_idle" "a_idle">>
<<destroyemotion "emotionhugh_idle" "h_idle">>
<<destroyemotion "emotionmathilda_idle" "mt_idle">>
<<destroyemotion "emotionnanditha_idle" "n_idle">>
<<destroyemotion "emotionmarzanna_idle" "mz_idle">>
<<destroyemotion "emotionashok_afraid" "a_afraid">>
<<destroyemotion "emotionhugh_afraid" "h_afraid">>
<<destroyemotion "emotionmathilda_afraid" "mt_afraid">>
<<destroyemotion "emotionnanditha_afraid" "n_afraid">>
<<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
<<destroyemotion "emotionashok_annoyed" "a_annoyed">>
<<destroyemotion "emotionhugh_annoyed" "h_annoyed">>
<<destroyemotion "emotionmathilda_annoyed" "mt_annoyed">>
<<destroyemotion "emotionnanditha_annoyed" "n_annoyed">>
<<destroyemotion "emotionmarzanna_annoyed" "mz_annoyed">>
<<destroyemotion "emotionashok_happy" "a_happy">>
<<destroyemotion "emotionhugh_happy" "h_happy">>
<<destroyemotion "emotionmathilda_happy" "mt_happy">>
<<destroyemotion "emotionnanditha_happy" "n_happy">>
<<destroyemotion "emotionmarzanna_happy" "mz_happy">>
<<destroyemotion "emotionashok_sad" "a_sad">>
<<destroyemotion "emotionhugh_sad" "h_sad">>
<<destroyemotion "emotionmathilda_sad" "mt_sad">>
<<destroyemotion "emotionnanditha_sad" "n_sad">>
<<destroyemotion "emotionmarzanna_sad" "mz_sad">>
<<destroyemotion "emotionashok_embarassed" "a_embarassed">>
<<destroyemotion "emotionhugh_angry" "h_angry">>
<<destroyemotion "emotionmathilda_scream" "mt_scream">>
<<destroyemotion "emotionmarzanna_embarassed" "mz_embarassed">>
<<if $ashok == true>>
    <<enableAshokCharacter>>   
    <<enablecorpse>>
    <<enablewindow>>
    <<enableletters>>
    <<enablegemstone>>
    <<enableapparatus>>
<<else>>
    <<disableAshokCharacter>>
    <<disablecorpse>>
    <<disablewindow>>
    <<disableletters>>
    <<disablegemStone>>
    <<disableapparatus>>
<<endif>>
<<if $marzanna == true>>
    <<enableMarzannaCharacter>>
    <<enablechemicals>>
    <<enableplants>>
    <<enablebookshelf>>
    <<enabledivination>>
    <<enableshelf>>
<<else>>
    <<disableMarzannaCharacter>>
    <<disablechemicals>>
    <<disableplants>>
    <<disablebookshelf>>
    <<disabledivination>>
    <<disableshelf>>
    <<endif>>
<<if $mathilda == true>>
    <<enableMathildaCharacter>>
    <<enabletools>>
    <<enableCabinet>>
    <<enableglobe>>
    <<enablealtar>>
    <<enableburner>>
<<else>>
    <<disableMathildaCharacter>>
    <<disabletools>>
    <<disablecabinet>>
    <<disableglobe>>
    <<disablealtar>>
    <<disableburner>>
<<endif>>
<<if $hugh == true>>
    <<enableHughCharacter>>
    <<enablecrate>>
    <<enablecan>>
    <<enableorrey>>
    <<enableeffigie>>
    <<enablecage>>
<<else>>
    <<disableHughCharacter>>
    <<disablecrate>>
    <<disablecan>>
    <<disableorrey>>
    <<disableeffigie>>
    <<disablecage>>
<<endif>>
<<if $nanditha == true>>
    <<enableNandithaCharacter>>
    <<enableanimal>>
    <<enablepatch>>
    <<enabletelescope>>
    <<enablevase>>
    <<enablegenerator>>
<<else>>
    <<disableNandithaCharacter>>
    <<disableanimal>>
    <<disablepatch>>
    <<disabletelescope>>
    <<disablevase>>
    <<disablgenerator>>
<<endif>>
<<if $actions == 40>>
   <<playrestsound Monster40 "monster40">>
   //<<wait  4>>
  <<playsound Mood40 "mood40">>
    <<activateemotion "emotionmathilda_idle" "mt_idle">>
    <<activateemotion "emotionnanditha_idle" "n_idle">>
    <<activateemotion "emotionmarzanna_idle" "mz_idle">>
    <<activateemotion "emotionhugh_idle" "h_idle">>
    <<activateemotion "emotionashok_idle" "a_idle">>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_idle" "mt_idle">> 
        <<playrestsound mathilda "mathilda">>
        Mathilda: Did you hear that?
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_idle" "n_idle">> 
        <<playrestsound nanditha "nanditha">>
        Nanditha: This old house makes weird noises.
    <<endif>>
    <<if $marzanna == true>>
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: Something else is in here with us.
    <<endif>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">> 
        <<playrestsound hugh "hugh">>
        Hugh: It's just the wind howling outside or something like that.
    <<endif>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">> 
        <<playrestsound ashok "ashok">>
        Ashok: Let's not get scared by some random noise.
    <<endif>>
    <<destroyemotion "emotionmathilda_idle" "mt_idle">>
    <<destroyemotion "emotionnanditha_idle" "n_idle">>
    <<destroyemotion "emotionmarzanna_idle" "mz_idle">>
    <<destroyemotion "emotionhugh_idle" "h_idle">>
    <<destroyemotion "emotionashok_idle" "a_idle">>
<<elseif $actions == 30>>
    <<activateemotion "emotionmathilda_annoyed" "mt_annoyed">>
    <<activateemotion "emotionhugh_annoyed" "h_annoyed">>
    <<activateemotion "emotionnanditha_idle" "n_idle">>
    <<activateemotion "emotionmarzanna_afraid" "mz_afraid">>
    <<activateemotion "emotionashok_idle" "a_idle">>
    <<playrestsound Monster30 "monster30">>
    <<wait  4>>
    <<playsound Mood30 "mood30">>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_annoyed" "mt_annoyed">> 
        <<playrestsound mathilda "mathilda">>
        Mathilda: There was this weird noise again!
    <<endif>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">> 
        <<playrestsound hugh "hugh">>
        Hugh: Ok I admit that didn't sound like wind at all.
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_idle" "n_idle">> 
        <<playrestsound nanditha "nanditha">>
        Nanditha: Hihi, spooky.
    <<endif>>
    <<if $marzanna == true>>
        <<emotionsprite "emotionmarzanna_afraid" "mz_afraid">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: I told you, we are not alone in here!
    <<endif>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">> 
        <<playrestsound ashok "ashok">>
        Ashok: Maybe we should hurry up a little.
    <<endif>>
    <<destroyemotion "emotionmathilda_annoyed" "mt_annoyed">>
    <<destroyemotion "emotionhugh_annoyed" "h_annoyed">>
    <<destroyemotion "emotionnanditha_idle" "n_idle">>
    <<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
    <<destroyemotion "emotionashok_idle" "a_idle">>
<<elseif $actions == 20>>
    <<activateemotion "emotionhugh_annoyed" "h_annoyed">>
    <<activateemotion "emotionmathilda_afraid" "mt_afraid">>
    <<activateemotion "emotionashok_annoyed" "a_annoyed">>
    <<activateemotion "emotionnanditha_afraid" "n_afraid">>
    <<activateemotion "emotionmarzanna_sad" "mz_sad">>
    <<playrestsound Monster20 "monster20">>
   <<wait  3>>
  <<playsound Mood20 "mood20">>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">> 
        <<playrestsound hugh "hugh">>
        Hugh: It's coming closer!
    <<endif>>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_afraid" "mt_afraid">> 
        <<playrestsound mathilda "mathilda">>
        Mathilda: We should look out for things we can use as weapons!
    <<endif>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_annoyed" "a_annoyed">> 
        <<playrestsound ashok "ashok">>
        Ashok: We should avoid this thing at all costs.
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_afraid" "n_afraid">> 
        <<playrestsound nanditha "nanditha">>
        Nanditha: This is not funny anymore.
    <<endif>>
    <<if $marzanna == true>>
        <<emotionsprite  "emotionmarzanna_sad" "mz_sad">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: We're not gonna make it out of here before that thing gets us.
    <<endif>>
    <<destroyemotion "emotionhugh_annoyed" "h_annoyed">>
    <<destroyemotion "emotionmathilda_afraid" "mt_afraid">>
    <<destroyemotion "emotionashok_annoyed" "a_annoyed">>
    <<destroyemotion "emotionnanditha_afraid" "n_afraid">>
    <<destroyemotion "emotionmarzanna_sad" "mz_sad">>
<<elseif $actions == 10>>
    <<playrestsound Monster10 "monster10">>
    <<wait  4>>
    <<playsound Mood10 "mood10">>
    <<activateemotion "emotionmarzanna_sad" "mz_sad">>
    <<activateemotion "emotionashok_afraid" "a_afraid">>
    <<activateemotion "emotionhugh_afraid" "h_afraid">>
    <<activateemotion "emotionnanditha_sad" "n_sad">>
    <<activateemotion "emotionmathilda_scream" "mt_scream">>
    <<if $marzanna == true>>
        <<if visited("interaction1crate") == true>>
            <<emotionsprite  "emotionmarzanna_sad" "mz_sad">> 
            <<playrestsound marzanna "marzanna">>
            Marzanna: We'll share Dr. Fist's fate soon.     
        <<else>>
            <<emotionsprite  "emotionmarzanna_sad" "mz_sad">> 
            <<playrestsound marzanna "marzanna">>
            Marzanna: We'll die the same way as that guy on the floor.
        <<endif>>
    <<endif>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_afraid" "a_afraid">> 
        <<playrestsound ashok "ashok">>
        Ashok: There's no denying it, we are in grave danger!
    <<endif>>
    <<if $hugh == true>>
        <<if visited("interaction1crate") == true>>
            <<emotionsprite "emotionhugh_afraid" "h_afraid">> 
            <<playrestsound hugh "hugh">>
            Hugh: I think this really is the creature that killed Dr. Fist.
            <<emotionsprite "emotionhugh_afraid" "h_afraid">> 
            <<playrestsound hugh "hugh">>
            Hugh: I think this really is the creature that tore apart the guy on the floor.
        <<endif>>
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_sad" "n_sad">> 
        <<playrestsound nanditha "nanditha">>
        Nanditha: Please, leave us alone!
    <<endif>>
    <<if $mathilda == true>>
        <<emotionsprite  "emotionmathilda_scream" "mt_scream">> 
        <<playrestsound mathilda "mathilda">>
        Mathilda: Whatever you are, I'm not afraid of you!
    <<endif>>
    <<destroyemotion "emotionmarzanna_sad" "mz_sad">>
    <<destroyemotion "emotionashok_afraid" "a_afraid">>
    <<destroyemotion "emotionhugh_afraid" "h_afraid">>
    <<destroyemotion "emotionnanditha_sad" "n_sad">>
    <<destroyemotion "emotionmathilda_scream" "mt_scream">>
<<elseif $actions == 1>>
    <<playrestsound Monster1 "monster1">>
    <<activateemotion "emotionhugh_sad" "h_sad">>
    <<activateemotion "emotionnanditha_sad" "n_sad">>
    <<activateemotion "emotionmathilda_sad" "mt_sad">>
    <<activateemotion "emotionashok_sad" "a_sad">>
    <<activateemotion "emotionmarzanna_happy" "mz_happy">>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_sad" "h_sad">> 
        <<playrestsound hugh "hugh">>
        Hugh: It's here!
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_sad" "n_sad">> 
        <<playrestsound nanditha "nanditha">>
        Nanditha: This is so unfair!
    <<endif>>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_sad" "mt_sad">> 
        <<playrestsound mathilda "mathilda">>
        Mathilda: Why us?
    <<endif>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_sad" "a_sad">> 
        <<playrestsound ashok "ashok">>
        Ashok: So. This is it. Our ending...
    <<endif>>
    <<if $marzanna == true>>
        <<emotionsprite "emotionmarzanna_happy" "mz_happy">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: Finally, it's over.
    <<endif>>
    <<destroyemotion "emotionhugh_sad" "h_sad">>
    <<destroyemotion "emotionnanditha_sad" "n_sad">>
    <<destroyemotion "emotionmathilda_sad" "mt_sad">>
    <<destroyemotion "emotionashok_sad" "a_sad">>
    <<destroyemotion "emotionmarzanna_happy" "mz_happy">>
    -> RUN!
<<endif>>
<<if $actions == 0>>
    <<jump monster_wins>>
<<elseif $marzanna == false && $hugh == false && $mathilda == false && $nanditha == false && $ashok == false>>
    <<jump killed_everyone>>
<<else>>
    //<<disableanimation>>
<<endif>>
<<if $marzanna == true && $hugh == false && $mathilda == false && $nanditha == false && $ashok == false && visited("vault") == true>>
    <<if visited("interaction1animal") == false || visited("interaction1corpse") == false || visited("interaction2patch") == false || visited("interaction2cabinet") == false || visited("interaction3") == false || visited("interaction3orrery") == false || visited("interaction4divination") == false || visited("interaction5storage") == false || visited("interaction5cage") == false>>
        <<activateemotion "emotionmarzanna_afraid" "mz_afraid">>
        <<emotionsprite "emotionmarzanna_afraid" "mz_afraid">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: Everyone is dead... There's no way I can escape on my own, I'll better give up...
        <<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
    <<endif>>
<<endif>>
<<if $marzanna == false && $mathilda == false && $key34 == false && $door34 == false && visited("interaction1mathilda") == true && visited("interaction3marzanna") == true>>
    <<set $actions = $actions - 9>>
<<endif>>
===


title: interaction1animal
tags:
color: red
group: room1
position: 35,-464
---
//object gets deactivated when the variable $nanditha turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionnanditha_afraid" "n_afraid">>
<<activateemotion "emotionhugh_annoyed" "h_annoyed">>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<activateemotion "emotionnanditha_happy" "n_happy">>
<<if $item2carrot == false>>
    <<objectsprite "trap1animal_idle" "trap1animal_triggered">>
    <<emotionsprite  "emotionnanditha_afraid" "n_afraid">> 
    <<playrestsound nanditha "nanditha">>
    Nanditha: Ouch! This creature just bit me!
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">> 
        <<playrestsound hugh "hugh">>
        Hugh: It's dead and can't do anything. You are just clumsy.
        <<emotionsprite  "emotionnanditha_annoyed" "n_annoyed">> 
        <<playrestsound nanditha "nanditha">>
        Nanditha: I swear it just did! I got the marks on my hand.
    <<endif>>
<<elseif $item1eye == true>>
    <<emotionsprite  "emotionnanditha_idle" "n_idle">> 
    <<playrestsound nanditha "nanditha">>
    Nanditha: These stuffed animals are so creepy.
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_idle" "mt_idle">> 
        <<playrestsound mathilda "mathilda">>
        Mathilda: They are somehow cute though, don't you think?
        <<emotionsprite  "emotionnanditha_idle" "n_idle">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: Not these ones.
    <<endif>>
<<else>>
    <<set $item1eye = true>>
    <<emotionsprite  "emotionnanditha_happy" "n_happy">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: It looks so hungry... I'm gonna feed it with the carrot I found!
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">> 
        <<playrestsound hugh "hugh">>
        Hugh: It's already dead... 
    <<endif>>
    <<destroyemotion "emotionnanditha_happy" "n_happy">>
    <<destroyemotion "emotionhugh_annoyed" "h_annoyed">>
    <<popupsprite "popup1eye" "popup1eye">>
    Nanditha found a glass eye!
    <<destroypopup "popup1eye" "popup1eye">>
    <<emotionsprite  "emotionnanditha_happy" "n_happy">> 
    <<playrestsound nanditha "nanditha">>
    Nanditha: Oh, one of its eyes fell off.
<<endif>>
<<destroyemotion "emotionnanditha_annoyed" "n_annoyed">>
<<destroyemotion "emotionnanditha_idle" "n_idle">>
<<destroyemotion "emotionnanditha_happy" "n_happy">>
//<<disableAnimal trap1animal_idle>>
<<jump room_investigate>>
===

title: interaction1crate
tags:
color: red
group: room1
position: 18,-49
---
//object gets deactivated when the variable $hugh turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionhugh_idle" "h_idle">>
<<activateemotion "emotionashok_afraid" "a_afraid">>
<<activateemotion "emotionmathilda_afraid" "mt_afraid">>
<<activateemotion "emotionnanditha_idle" "n_idle">>
<<emotionsprite "emotionhugh_idle" "h_idle">> 
<<playrestsound hugh "hugh">>
Hugh: We were inside this crate... like cargo... There's even a shipping label but it's barely readable. Something with "new materials" and it's adressed to a "Dr. John Fist".
<<if $ashok == true>>
    <<emotionsprite "emotionashok_afraid" "a_afraid">> 
    <<playrestsound ashok "ashok">>
    Ashok: Do you seriously think we were kidnapped and brought here for what, organ harvesting?
    <<emotionsprite "emotionhugh_idle" "h_idle">> 
    <<playrestsound hugh "hugh">>
    Hugh: Why not? There were some sketchy figures at that party last night. Maybe something was put in our drinks. Maybe we weren't supposed to be waking up at all...
     <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_afraid" "mt_afraid">> 
        <<playrestsound mathilda "mathilda">>
        Mathilda: So we could have ended up like that guy on the floor.
        <<emotionsprite "emotionhugh_afraid" "h_afraid">> 
        <<playrestsound hugh "hugh">>
        Hugh: Or he's that Dr. Fist guy who needed us as "materials".
    <<endif>>
     <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_idle" "n_idle">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: Looks like we got lucky. I mean he can't harvest our organs in that condition.
        <<emotionsprite "emotionhugh_afraid" "h_afraid">>
        <<playrestsound hugh "hugh">>
        Hugh: That's true but we should still be cautios because the person or thing that killed him could still be somewhere near...
    <<endif>>
<<endif>>
<<destroyemotion "emotionhugh_idle" "h_idle">>
<<destroyemotion "emotionhugh_afraid" "h_afraid">>
//<<playsound roar>>
<<if $marzanna == true>>
    <<activateemotion "emotionmarzanna_sad" "mz_sad">>
    <<emotionsprite  "emotionmarzanna_sad" "mz_sad">> 
    <<playrestsound marzanna "marzanna">>
    Marzanna: No, I don't want to die! We need to get out of here!
    <<destroyemotion "emotionmarzanna_sad" "mz_sad">>
<<endif>>
<<disableCrate door1crate_open>>
<<jump room_investigate>>
===

title: interaction1tools
tags:
color: red
group: room1
position: 18,-322
---
//object gets deactivated when the variable $mathilda turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionmathilda_happy" "mt_happy">>
<<activateemotion "emotionhugh_idle" "h_idle">>
<<activateemotion "emotionmathilda_annoyed" "mt_annoyed">>
<<activateemotion "emotionhugh_afraid" "h_afraid">>
<<activateemotion "emotionnanditha_afraid" "n_afraid">>
<<activateemotion "emotionashok_idle" "a_idle">>
<<activateemotion "emotionmarzanna_sad" "mz_sad">>
<<if visited_count("interaction1tools") == 0>>
    <<emotionsprite "emotionmathilda_happy" "mt_happy">> 
    <<playrestsound mathilda "mathilda">>
    Mathilda: Weapons! Nice!
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">> 
        <<playrestsound hugh "hugh">>
        Hugh: Be careful, Mathilda. I don't think we would be much safer if you carried a knife.
    <<endif>>
<<else>>
    <<emotionsprite "emotionmathilda_annoyed" "mt_annoyed">> 
    <<playrestsound mathilda "mathilda">>
    Mathilda: I'll take one of these knives to defend us.
    <<destroyemotion "emotionmathilda_happy" "mt_happy">>
    <<destroyemotion "emotionhugh_idle" "h_idle">>
    <<destroyemotion "emotionmathilda_annoyed" "mt_annoyed">>
    <<set $mathilda = false>>
    <<playrestsound death_mathilda "death_mathilda">>
    //<<popupsprite "emotionmathilda_death" "mt_death">>
    <<enabledeathMathilda>>
    Mathilda: AAAAAAAAAAAAH!
   
    <<disableMathilda>>//disabling mathilda character
    <<disabletoolsitem>>//disabling the tools
    <<disableknife>>//disabling the knife
    <<disabledeathMathilda>> //disabling the mathilda shock sprite
    <<enableMathildaCorpse>>
    <<enableMathildaDeath>>
    <<set $item2remote = false>>
    <<set $key34 = false>>
    <<set $item4candle = false>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_afraid" "h_afraid">>
        <<playrestsound hugh "hugh">>
        Hugh: MATHILDA!
    <<endif>>

    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_afraid" "n_afraid">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: Mathilda?
    <<endif>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">>
        <<playrestsound ashok "ashok">>
    // <<enableMathildaCorpse>>
        Ashok: I think she's dead.
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_sad" "n_sad">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: No, that can't be!
    <<endif>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_sad" "h_sad">>
        <<playrestsound hugh "hugh">>
        Hugh: Not Mathilda!
    <<endif>>
    <<if $marzanna == true>>
        <<emotionsprite  "emotionmarzanna_sad" "mz_sad">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: We're all gonna die in here!
    <<endif>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_annoyed" "a_annoyed">>
        <<playrestsound ashok "ashok">>
        Ashok: Pull yourselves together and help me find a way out of here before there's more casualties!
    <<endif>>
   // <<disableTools trap1tools_active>>
<<endif>>
<<destroyemotion "emotionhugh_afraid" "h_afraid">>
<<destroyemotion "emotionnanditha_afraid" "n_afraid">>
<<destroyemotion "emotionashok_idle" "a_idle">>
<<destroyemotion "emotionnanditha_sad" "n_sad">>
<<destroyemotion "emotionhugh_sad" "h_sad">>
<<destroyemotion "emotionmarzanna_sad" "mz_sad">>
<<destroyemotion "emotionashok_annoyed" "a_annoyed">>

<<jump room_investigate>>
===

title: interaction1chemicals
tags:
color: red
group: room1
position: 18,-186
---
//object gets deactivated when the variable $marzanna turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionmarzanna_happy" "mz_happy">>
<<activateemotion "emotionmarzanna_idle" "mz_idle">>
<<if $key12 == false>>
    <<set $key12 = true>>
    <<popupsprite "popup1key" "popup1key">>
    Marzanna found a key!
    <<destroypopup "popup1key" "popup1key">>
    <<emotionsprite "emotionmarzanna_happy" "mz_happy">> 
    <<playrestsound marzanna "marzanna">>
    Marzanna: I found a key! We can get out of here now!
    <<emotionsprite "emotionashok_happy" "a_happy">> 
    <<playrestsound ashok "ashok">>
    Ashok: Good job, Marzanna!
<<else>>
    <<emotionsprite "emotionmarzanna_idle" "mz_idle">> 
    <<playrestsound marzanna "marzanna">>
    Marzanna: There's nothing else here...
<<endif>>
<<destroyemotion "emotionashok_happy" "a_happy">>
<<destroyemotion "emotionmarzanna_idle" "mz_idle">>
<<jump room_investigate>>
===

title: interaction1corpse
tags:
color: red
group: room1
position: 18,86
---
// <<if $ashok== false>>
// <<disablecorpse>>
// <<jump room_investigate>>
// <<endif>>
//object gets deactivated when the variable $ashok turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionashok_idle" "a_idle">>
<<activateemotion "emotionhugh_happy" "h_happy">>
<<activateemotion "emotionnanditha_happy" "n_happy">>
<<if $item1letter == false>>
    <<set $item1letter = true>>
    <<popupsprite "popupletter" "popup1letter">>
    Ashok found a letter!
    <<destroypopup "popupletter" "popup1letter">>
    <<emotionsprite "emotionashok_idle" "a_idle">> 
    <<playrestsound ashok "ashok">>
    Ashok: He had this piece of paper with him, looks like a page from a letter... it's drenched in blood, I can't really read it. But it starts with "Dear John".
    <<if visited("interaction1crate") == true && $hugh == true>>
        <<emotionsprite "emotionhugh_happy" "h_happy">> 
        <<playrestsound hugh "hugh">>
        Hugh: So this really is Dr. Fist.
    <<endif>>
    <<if $nanditha == true>>
    <<emotionsprite  "emotionnanditha_happy" "n_happy">> 
    <<playrestsound nanditha "nanditha">>
    Nanditha: I'm shure this info can help us get out of here!
    <<endif>>
<<else>>
    <<emotionsprite "emotionashok_idle" "a_idle">> 
    <<playrestsound ashok "ashok">>
    Ashok: There's nothing else here...
<<endif>>
<<destroyemotion "emotionashok_idle" "a_idle">>
<<destroyemotion "emotionhugh_happy" "h_happy">>
<<destroyemotion "emotionnanditha_happy" "n_happy">>
<<destroyemotion "emotionashok_idle" "a_idle">>
<<jump room_investigate>>
===

title: interaction1mathilda
tags:
color: red
group: room1
position: 20,236
---
//object gets activated when the variable $mathilda turns false (it's her dead body)

<<set $actions = $actions - 1>>
<<activateemotion "emotionhugh_sad" "h_sad">>
<<activateemotion "emotionnanditha_sad" "n_sad">>
<<activateemotion "emotionashok_idle" "a_idle">>
<<activateemotion "emotionmarzanna_afraid" "mz_afraid">>
<<if (visited_count("interaction1mathilda") == 0) && (visited("interaction2cabinet") == true || visited("interaction3globe") == true || visited("interaction4altar") == true)>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_sad" "h_sad">> 
        <<playrestsound hugh "hugh">>
        Hugh: I guess it's best to take the things she found with us...
    <<elseif $nanditha == true>>
        <<emotionsprite  "emotionnanditha_sad" "n_sad">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: This will forever remind me of her...
    <<elseif $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">> 
        <<playrestsound ashok "ashok">>
        Ashok: Ok, let's loot the body.
    <<elseif $marzanna == true>>
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: She might have found something I need now...
    <<endif>>
    <<if visited("interaction2cabinet") == true>>
        <<set $item2remote = true>>
        <<popupsprite "popup2remote" "popup2remote">>
        Picked up the remote control from Mathilda's body.
        <<destroypopup "popup2remote" "popup2remote">>
    <<endif>>
    <<if visited("interaction3globe") == true>>
        <<set $key34 = true>>
        <<popupsprite "popup3key" "popup3key">>
        Picked up the key from Mathilda's body.
        <<destroypopup "popup3key" "popup3key">>
    <<endif>>
    <<if visited("interaction4altar") == true>>
        <<set $item4candle = true>>
        <<popupsprite "popup4candle" "popup4candle">>
        Picked up the candle from Mathilda's body.
        <<destroypopup "popup4candle" "popup4candle">>
    <<endif>>
<<else>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_sad" "h_sad">> 
        <<playrestsound hugh "hugh">>
        Hugh: Why her? She was the only one who wasn't annoying me to death!
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_sad" "n_sad">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: Mathilda... I just can't believe it.
    <<endif>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">> 
        <<playrestsound ashok "ashok">>
        Ashok: Don't you guys think it's strange that these knifes were so loose? As if it was set up to cause accidents.
    <<endif>>
    <<if $marzanna == true>>
        <<emotionsprite "emotionmarzanna_afraid" "mz_idle">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: This was not an accident, it was a trap!
    <<endif>>
<<endif>>
<<destroyemotion "emotionhugh_sad" "h_sad">>
<<destroyemotion "emotionnanditha_sad" "n_sad">>
<<destroyemotion "emotionashok_idle" "a_idle">>
<<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
<<jump room_investigate>>
===


title: interaction2window
tags:
color: green
group: room2
position: 284,-458
---

//object gets deactivated when the variable $ashok turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionashok_happy" "a_happy">>
<<activateemotion "emotionnanditha_idle" "n_idle">>
<<activateemotion "emotionmarzanna_afraid" "mz_afraid">>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<activateemotion "emotionhugh_idle" "h_idle">>
<<if visited_count("interaction2window") == 0>>
    <<emotionsprite "emotionashok_happy" "a_happy">> 
    <<playrestsound ashok "ashok">>
    Ashok: This window has a crack. Maybe I can break it.
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_idle" "n_idle">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: Be careful, Ashok! Maybe we can find a shovel or something else to break it with.
    <<endif>>
    <<emotionsprite "emotionashok_idle" "a_idle">>
    <<playrestsound ashok "ashok">>
    Ashok: I'll just try to smash it.
    
    <<emotionsprite "emotionashok_happy" "a_happy">> 
    <<playrestsound ashok "ashok">>
    <<playrestsound Trap "glass_shatter">>
    Ashok: It worked! We can get out through the hole I made!
    <<destroyemotion "emotionashok_happy" "a_happy">>
<<else>>
    <<emotionsprite "emotionashok_happy" "a_happy">> 
    <<playrestsound ashok "ashok">>
    Ashok: Ok guys, I'll climb through that window now.
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_afraid" "n_afraid">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: Ashok, wait!
    <<endif>>
    <<destroyemotion "emotionashok_happy" "a_happy">>
    <<destroyemotion "emotionnanditha_afraid" "n_afraid">>
    <<set $ashok = false>>
    <<playrestsound death_ashok "death_ashok">>
    <<enabledeathAshok>>
    Ashok: Ugh!
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_afraid" "n_afraid">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: NOOO ASHOK!
    <<endif>>
    <<disabledeathAshok>> 
    <<enableAshokCorpse>>
    <<enableAshokDeath>>
    <<set $item1letter = false>>
    <<set $item3code = false>>
    <<set $key51 = false>>
    <<if $marzanna == true>>
        <<disableAshok>>
        <<disablewindow>>
        <<emotionsprite "emotionmarzanna_afraid" "mz_afraid">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: He's bleeding out!
    <<endif>>
    <<if $nanditha == true && $mathilda == false>>
        <<emotionsprite  "emotionnanditha_sad" "n_sad">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: First Mathilda and now my brother. I am cursed!
    <<elseif $nanditha == true && $mathilda == true>>
        <<emotionsprite "emotionmathilda_idle" "mt_idle">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: Don't worry, you still got me, Nanditha.
    <<endif>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">>
        <<playrestsound hugh "hugh">>
        Hugh: I had estimated him to be smarter than that.
    <<endif>>
<<endif>>
<<destroyemotion "emotionnanditha_afraid" "n_afraid">>
<<destroyemotion "emotionnanditha_sad" "n_sad">>
<<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
<<destroyemotion "emotionmathilda_idle" "mt_idle">>
<<destroyemotion "emotionhugh_idle" "h_idle">>
<<jump room_investigate>>
===

title: interaction2patch
tags:
color: green
group: room2
position: 283,-308
---
//object gets deactivated when the variable $nanditha turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionnanditha_happy" "n_happy">>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<if $item2carrot == false>>
    <<set $item2carrot = true>>
    <<popupsprite "popup2carrot" "popup2carrot">>
    Nanditha found a carrot!
    <<destroypopup "popup2carrot" "popup2carrot">>
    <<emotionsprite  "emotionnanditha_happy" "n_happy">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: Nice, provisions!
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_idle" "mt_idle">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: Let's hope it's not poisonous or anything.
    <<endif>>
<<else>>
    <<emotionsprite  "emotionnanditha_idle" "n_idle">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: Hmmm... no more carrots.
<<endif>>
<<destroyemotion "emotionnanditha_happy" "n_happy">>
<<destroyemotion "emotionmathilda_idle" "mt_idle">>
<<destroyemotion "emotionnanditha_idle" "n_idle">>
<<jump room_investigate>>
===

title: interaction2can
tags:
color: green
group: room2
position: 274,-167
---
//object gets deactivated when the variable $hugh turns false
 <<set $actions = $actions - 1>>
<<activateemotion "emotionhugh_idle" "h_idle">>
<<activateemotion "emotionmarzanna_happy" "mz_happy">>

<<if $key23 == false>>
   
    <<set $key23 = true>>
    <<emotionsprite "emotionhugh_idle" "h_idle">>
    <<playrestsound hugh "hugh">>
    Hugh: There's something inside this watering can...
    <<destroyemotion "emotionhugh_idle" "h_idle">>
    <<popupsprite "popup2key" "popup2key">>
    Hugh found a key!
    <<destroypopup "popup2key" "popup2key">>
    <<activateemotion "emotionhugh_happy" "h_happy">>
    <<emotionsprite "emotionhugh_happy" "h_happy">> 
    <<playrestsound hugh "hugh">>
    Hugh: It's a key! Let's go to the next room!
    <<emotionsprite "emotionmarzanna_happy" "mz_happy">> 
    <<playrestsound marzanna "marzanna">>
    Marzanna: You are our savior, Hugh!
<<else>>
    <<emotionsprite "emotionhugh_idle" "h_idle">> 
    <<playrestsound hugh "hugh">>
    Hugh: Completely dry...
<<endif>>
<<destroyemotion "emotionhugh_happy" "h_happy">>
<<destroyemotion "emotionhugh_idle" "h_idle">>
<<destroyemotion "emotionmarzanna_happy" "mz_happy">>
<<jump room_investigate>>
===

title: interaction2cabinet
tags:
color: green
group: room2
position: 271,-32
---
//object gets deactivated when the variable $mathilda turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<activateemotion "emotionnanditha_happy" "n_happy">>
<<activateemotion "emotionhugh_idle" "h_idle">>
<<if $item2remote == false>>
    <<set $item2remote = true>>
    <<popupsprite "popup2remote" "popup2remote">>
    Mathilda found a remote!
    <<destroypopup "popup2remote" "popup2remote">>
    <<emotionsprite "emotionmathilda_idle" "mt_idle">> 
    <<playrestsound mathilda "mathilda">>
    Mathilda: Weird, someone kept a remote control in this cabinet.
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_happy" "n_happy">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: What is it for?
    <<endif>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">>
        <<playrestsound hugh "hugh">>
        Hugh: It looks like an old garage door remote.
    <<endif>>
<<else>>
    <<emotionsprite "emotionmathilda_idle" "mt_idle">>
    <<playrestsound mathilda "mathilda">>
    Mathilda: Rat poison, fertilizers, nothing of use in here.
<<endif>>
<<destroyemotion "emotionmathilda_idle" "mt_idle">>
<<destroyemotion "emotionnanditha_happy" "n_happy">>
<<destroyemotion "emotionhugh_idle" "h_idle">>
<<jump room_investigate>>
===

title: interaction2plants
tags:
color: green
group: room2
position: 280,105
---
//object gets deactivated when the variable $marzanna turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionmarzanna_idle" "mz_idle">>
<<activateemotion "emotionnanditha_idle" "n_idle">>
<<emotionsprite "emotionmarzanna_idle" "mz_idle">> 
<<playrestsound marzanna "marzanna">>
Marzanna: I've never seen plants like these before.
<<if $nanditha == true>>
    <<emotionsprite  "emotionnanditha_idle" "n_idle">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: They do look pretty weird.
<<endif>>
<<destroyemotion "emotionmarzanna_idle" "mz_idle">>
<<destroyemotion "emotionnanditha_idle" "n_idle">>
<<if $mathilda == false && visited_count("room4_enter") == 0 && $key34 == false && visited("interaction4globe") == false>>
    <<activateemotion "emotionmarzanna_idle" "mz_idle">>
    <<set $actions = $actions - 1>>
    <<set $key34 = true>>
    <<set $backupkey34 = true>>
    <<popupsprite "popup3key" "popup3key">>
    Marzanna found a key!
    <<destroypopup "popup3key" "popup3key">>
    <<emotionsprite "emotionmarzanna_happy" "mz_happy">> 
    <<playrestsound marzanna "marzanna">>
    Marzanna: There's an other key in between these plants!
    <<emotionsprite "emotionhugh_annoyed" "h_annoyed">> 
    <<playrestsound hugh "hugh">>
    Hugh: Why didn't you tell us earlier?
    <<emotionsprite "emotionmarzanna_embarassed" "mz_embarassed">>
    <<playrestsound marzanna "marzanna">>
    Marzanna: I didn't see it back then.
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_happy" "a_happy">>
        <<playrestsound ashok "ashok">>
        Ashok: Don't worry Marzanna. You did find it now and that's all that matters. So let's find the lock it belongs to.
    <<endif>>
    <<endif>>
    <<destroyemotion "emotionmarzanna_embarassed" "mz_embarassed">>
    <<destroyemotion "emotionashok_happy" "a_happy">>
<<jump room_investigate>>
===

title: interaction2ashok
tags:
color: green
group: room2
position: 285,248
---
//object gets activated when the variable $ashok turns false (it's his dead body)
<<set $actions = $actions - 1>>
<<activateemotion "emotionnanditha_sad" "n_sad">>
<<activateemotion "emotionhugh_idle" "h_idle">>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<activateemotion "emotionmarzanna_afraid" "mz_afraid">>
<<if (visited_count("interaction2ashok") == 0) && (visited("interaction1corpse") == true || visited("interaction3letters") == true || visited("interaction5apparatus") == true)>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_sad" "n_sad">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: My brother would have wanted me to take what he left behind...
    <<elseif $marzanna == true>>
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: He might have found something we can use...
    <<elseif $hugh == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">> 
        <<playrestsound hugh "hugh">>
        Hugh: We should take his possessions, he doesn't need them anymore.
    <<elseif $mathilda == true>>
        <<emotionsprite "emotionmathilda_idle" "mt_idle">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: We can take his stuff now, might be useful later.
    <<endif>>
    <<if visited("interaction1corpse") == true>>
        <<set $item1letter = true>>
        <<popupsprite "popupletter" "popup1letter">>
        Picked up the letter from Ashok's body.
        <<destroypopup "popupletter" "popup1letter">>
    <<endif>>
    <<if visited("interaction3letters") == true && visited("interaction1corpse") == true>>
        <<set $item3code = true>>
        <<popupsprite "popup3code" "popup3code">>
        Picked up the code from Ashok's body.
        <<destroypopup "popup3code" "popup3code">>
    <<endif>>
    <<if visited("interaction5apparatus") == true>>
        <<set $key51 = true>>
        <<popupsprite "popup5key" "popup5key">>
        Picked up the key from Ashok's body.
        <<destroypopup "popup5key" "popup5key">>
    <<endif>>
<<else>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_sad" "n_sad">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: I never wanted to be an only child.
    <<endif>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">>
        <<playrestsound hugh "hugh">>
        Hugh: If this window really was a way out, he's now blocking it and I'm not touching a body to change that.
    <<endif>>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_idle" "mt_idle">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: I think it's quite embarassing to die like that.
    <<endif>>
    <<if $marzanna == true>>
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: So much blood...
    <<endif>>
<<endif>>
<<destroyemotion "emotionnanditha_sad" "n_sad">>
<<destroyemotion "emotionhugh_idle" "h_idle">>
<<destroyemotion "emotionmathilda_idle" "mt_idle">>
<<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
<<jump room_investigate>>
===


title: interaction3letters
tags:
color: yellow
group: room3
position: 536,-469
---

//object gets deactivated when the variable $ashok turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionashok_happy" "a_happy">>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<activateemotion "emotionnanditha_idle" "n_idle">>
<<activateemotion "emotionhugh_annoyed" "h_annoyed">>
<<emotionsprite "emotionashok_happy" "a_happy">> 
<<playrestsound ashok "ashok">>
// <<if $ashok== false>>
// <<disableletters>>
// <<endif>>
Ashok: Here's a stack of letters. 
<<if visited("interaction1crate") == true>>
    Ashok: Maybe I can find some information about this Dr. Fist and what he was all about.
<<endif>>
<<if $mathilda == true>>
    <<emotionsprite "emotionmathilda_idle" "mt_idle">>
    <<playrestsound mathilda "mathilda">>
    Mathilda: I think it's more important to find more clues on how we get out of here instead of wondering about the motives of that crazy dude.
<<endif>>
<<if $item1letter == true>>
    <<emotionsprite "emotionashok_idle" "a_idle">>
    <<playrestsound ashok "ashok">>
    Ashok: Judging from the handwriting and the paper, this one here might belong to the sheet I found on the body.
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_idle" "n_idle">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: What does it say?
    <<endif>>
    <<emotionsprite "emotionashok_idle" "a_idle">>
    <<playrestsound ashok "ashok">>
    Ashok: It's from a guy named Nicholas who is reminding John that he should not forget what happened on the 23rd of April in 1999. But he doesn't specify what event he is referring to.
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">>
        <<playrestsound hugh "hugh">>
        Hugh: Anyhing else? Maybe something that could be of actual use for us?
    <<endif>>
<<endif>>
<<if $item3code == false>>
    <<set $item3code = true>>
    <<emotionsprite "emotionashok_happy" "a_happy">>
    <<playrestsound ashok "ashok">>
    Ashok: Wait, there's a note between the letters!
    <<destroyemotion "emotionashok_happy" "a_happy">>
    <<popupsprite "popup3code" "popup3code">>
    Ashok found a code!
    <<destroypopup "popup3code" "popup3code">>
    <<activateemotion "emotionashok_idle" "a_idle">> 
    <<emotionsprite "emotionashok_idle" "a_idle">>
    <<playrestsound ashok "ashok">>
    Ashok: "99423"
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">>
        <<playrestsound hugh "hugh">>
            Hugh: Year 1999, 4th month and 23rd day. Seems like John really didn't want to forget that day. Maybe it's the password for his computer.
            <<if $mathilda == true>>
            <<emotionsprite "emotionmathilda_idle" "mt_idle">>
            <<playrestsound mathilda "mathilda">>
            Mathilda: I bet he does not own a computer at all. I mean, look around, this place is almost medieval.
            <<emotionsprite "emotionhugh_idle" "h_idle">>
            <<playrestsound hugh "hugh">>
            Hugh: Point taken. Still, we should keep that code. It might be useful later.
        <<endif>>
    <<endif>>
<<else>>
    <<emotionsprite "emotionashok_idle" "a_idle">>
    <<playrestsound ashok "ashok">>
    Ashok: The other letters seem to be congratulations on... some kind of "scientific breakthrough". No more notes.
<<endif>>
<<destroyemotion "emotionmathilda_idle" "mt_idle">>
<<destroyemotion "emotionnanditha_idle" "n_idle">>
<<destroyemotion "emotionashok_idle" "a_idle">>
<<destroyemotion "emotionhugh_annoyed" "h_annoyed">>
<<destroyemotion "emotionhugh_idle" "h_idle">>
<<jump room_investigate>>
===

title: interaction3telescope
tags:
color: yellow
group: room3
position: 539,-325
---
//object gets deactivated when the variable $nanditha turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionnanditha_happy" "n_happy">>
<<activateemotion "emotionhugh_annoyed" "h_annoyed">>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<emotionsprite  "emotionnanditha_happy" "n_happy">> 
<<playrestsound nanditha "nanditha">>
Nanditha: Oh nice, a telescope! I'll take a look at the stars!
<<if $hugh == true>>
    <<emotionsprite "emotionhugh_annoyed" "h_annoyed">>
    <<playrestsound hugh "hugh">>
    Hugh: And how will you do that in a windowless room?
<<endif>>
<<if $mathilda == true>>
    <<emotionsprite "emotionmathilda_idle" "mt_idle">>
    <<playrestsound mathilda "mathilda">>
    Mathilda: That's cute of you Nanditha, but finding a key or a way out would be more helpful, don't you think?
    <<emotionsprite  "emotionnanditha_idle" "n_idle">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: You're right, sorry. 
<<endif>>
<<emotionsprite  "emotionnanditha_annoyed" "n_annoyed">>
<<playrestsound nanditha "nanditha">>
Nanditha: It doesn't work.
<<if $hugh == true>>
    <<emotionsprite "emotionhugh_annoyed" "h_annoyed">> 
    <<playrestsound hugh "hugh">>
    Hugh: - sigh -
<<endif>>
<<if $ashok == false && visited_count("room1_enter") == 0 && visited("room5_enter") == true && $key51 == false>>
    <<set $key51 = true>>
    <<set $backupkey51 = true>>
    <<emotionsprite  "emotionnanditha_happy" "n_happy">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: Oh, there actually is a key attached!
    <<destroyemotion "emotionnanditha_happy" "n_happy">>
    <<popupsprite "popup3keydup" "popup3keydup">>
    Nanditha found a key!
    <<destroypopup "popup3keydup" "popup3keydup">>
    <<if $hugh == true>>
        <<activateemotion "emotionhugh_annoyed" "h_annoyed">>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">> 
        <<playrestsound hugh "hugh">>
        Hugh: Don't just lie to keep the mood up.
        <<emotionsprite  "emotionnanditha_annoyed" "n_annoyed">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: I'm not lying! Look, here it is! I must have missed it before. I mean, it was hidden very well.
    <<endif>>
    <<activateemotion "emotionnanditha_happy" "n_happy">>
    Nanditha: I'm pretty shure this must be the one for the door in the laboratory, maybe it's even the last one we need to open at all!
<<endif>>
<<destroyemotion "emotionnanditha_annoyed" "n_annoyed">>
<<destroyemotion "emotionhugh_annoyed" "h_annoyed">>
<<destroyemotion "emotionmathilda_idle" "mt_idle">>
<<destroyemotion "emotionnanditha_happy" "n_happy">>
<<jump room_investigate>>
===

title: interaction3orrery
tags:
color: yellow
group: room3
position: 549,-194
---
//object gets deactivated when the variable $hugh turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionhugh_idle" "h_idle">>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<activateemotion "emotionashok_annoyed" "a_annoyed">>
<<activateemotion "emotionmarzanna_idle" "mz_idle">>
<<activateemotion "emotionmarzanna_happy" "mz_happy">>
<<emotionsprite "emotionhugh_idle" "h_idle">> 
<<playrestsound hugh "hugh">>
Hugh: Wow, an old orrery. But it looks like our captor wasn't up to date with post-medieval astronomy.
<<if $mathilda == true>>
    <<emotionsprite "emotionmathilda_idle" "mt_idle">> 
    <<playrestsound mathilda "mathilda">>
    Mathilda: What do you mean?
    <<emotionsprite "emotionhugh_idle" "h_idle">> 
    <<playrestsound hugh "hugh">>
    Hugh: It's set up geocentric, with the earth in the center.
        <<if $ashok == true>>
            <<emotionsprite "emotionashok_annoyed" "a_annoyed">> 
            <<playrestsound ashok "ashok">>
            Ashok: No need to explain. We all know what "geocentric" means.
            <<emotionsprite "emotionhugh_happy" "h_happy">>
            <<playrestsound hugh "hugh">>
            Hugh: You're right. Now, everyone does.
            <<emotionsprite "emotionashok_annoyed" "a_annoyed">>
            <<playrestsound ashok "ashok">>
            Ashok: ...
        <<endif>>
<<endif>>
<<destroyemotion "emotionhugh_idle" "h_idle">>
<<destroyemotion "emotionashok_annoyed" "a_annoyed">>
<<if $item3key == false>>
    <<set $item3key = true>>
    <<popupsprite "popup3cagekey" "popup3cagekey">>
    Hugh found a key!
    <<destroypopup "popup3cagekey" "popup3cagekey">>
    <<activateemotion "emotionhugh_happy" "h_happy">>
    <<emotionsprite "emotionhugh_happy" "h_happy">> 
    <<playrestsound hugh "hugh">>
    Hugh: Yes, an other key! I wonder how this one end up stuck in here.
    <<if $marzanna == true>>
        <<if $door34 == true>>
            <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
            <<playrestsound marzanna "marzanna">>
            Marzanna: But the door has already been opened. This key has to be for something else.
        <<else>>
            <<emotionsprite "emotionmarzanna_happy" "mz_happy">>
            <<playrestsound marzanna "marzanna">>
            Marzanna: Try it with the door!
        <<endif>>
    <<endif>>
<<endif>>
<<destroyemotion "emotionhugh_happy" "h_happy">>
<<destroyemotion "emotionmarzanna_idle" "mz_idle">>
<<destroyemotion "emotionmarzanna_happy" "mz_happy">>
<<jump room_investigate>>
===

title: interaction3globe
tags:
color: yellow
group: room3
position: 544,-56
---
//object gets deactivated when the variable $mathilda turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionmathilda_happy" "mt_happy">>
<<activateemotion "emotionhugh_idle" "h_idle">>
<<activateemotion "emotionmathilda_annoyed" "mt_annoyed">>
<<if $key34 == false>>
    <<set $key34 = true>>
    <<emotionsprite "emotionmathilda_happy" "mt_happy">> 
    <<playrestsound mathilda "mathilda">>
    Mathilda: It looks like this globe can be opened, that's pretty neat!
    <<destroyemotion "emotionmathilda_happy" "mt_happy">>
    <<setglobesprite "globe_open" "globe_open">>
    <<popupsprite "popup3key" "popup3key">>
    Mathilda found a key!
    <<destroypopup "popup3key" "popup3key">>
    <<if $item3key == true>>
        <<activateemotion "emotionhugh_idle" "h_idle">>
        <<emotionsprite "emotionhugh_idle" "h_idle">>
        <<playrestsound hugh "hugh">>
        Hugh: If my key doesn't work, than this should be the right one for the door of this room.
    <<endif>>
    <<activateemotion "emotionmathilda_happy" "mt_happy">>
    <<emotionsprite "emotionmathilda_happy" "mt_happy">>
    <<playrestsound mathilda "mathilda">>
    Mathilda: One step closer to freedom!
<<else>>
    <<emotionsprite "emotionmathilda_annoyed" "mt_annoyed">>
    <<playrestsound mathilda "mathilda">>
    Mathilda: I had hoped for a secret stash but it's empty.
<<endif>>
<<destroyemotion "emotionhugh_idle" "h_idle">>
<<destroyemotion "emotionmathilda_happy" "mt_happy">>
<<destroyemotion "emotionmathilda_annoyed" "mt_annoyed">>
<<jump room_investigate>>
===

title: interaction3bookcase
tags:
color: yellow
group: room3
position: 539,82
---
//object gets deactivated when the variable $marzanna turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionmarzanna_idle" "mz_idle">>
<<activateemotion "emotionnanditha_idle" "n_idle">>
<<activateemotion "emotionashok_happy" "a_happy">>
<<activateemotion "emotionnanditha_happy" "n_happy">>
<<if $item4grimoire == false>>
    <<if visited_count("interaction3bookcase") == 0>>
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: There's a gap, as if one of the books was missing.
        <<if $nanditha == true>>
            <<emotionsprite  "emotionnanditha_idle" "n_idle">>
            <<playrestsound nanditha "nanditha">>
            Nanditha: Or something is hidden there!
        <<endif>>
    <<else>>
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: It's hard to reach...
        <<destroyemotion "emotionmarzanna_idle" "mz_idle">>
        <<set $marzanna = false>>
         <<playrestsound death_marzanna "death_marzanna">>
        <<enabledeathMarzanna>>
        //<<popupsprite "emotionmarzanna_death" "mz_death">>
        Marzanna: IIIIIIIEEK! //the bookcase falls on Marzanna
        <<if $ashok == true>>
            <<activateemotion "emotionashok_afraid" "a_afraid">>
            <<emotionsprite "emotionashok_afraid" "a_afraid">>
            <<playrestsound ashok "ashok">>
            Ashok: Marzanna?
        <<endif>>
        <<disabledeathMarzanna>>
        <<disableMarzanna>>
        <<disablebookshelf>>
        <<enablevault>>
        <<enableMarzannaCorpse>>
        <<enableMarzannaDeath>>
        <<set $key12 = false>>
        <<set $item4grimoire = false>>
        <<set $item5card = false>>
        <<if $mathilda == false && $backupkey34 == true && $door34 == false>>
            <<set $key34 = false>>
        <<endif>>
        <<if $nanditha == true>>
            <<activateemotion "emotionnanditha_afraid" "n_afraid">>
            <<emotionsprite  "emotionnanditha_afraid" "n_afraid">>
            <<playrestsound nanditha "nanditha">>
            Nanditha: That can't be!
            <<if $ashok == false || $mathilda == false>>
                <<emotionsprite  "emotionnanditha_sad" "n_sad">>
                <<playrestsound nanditha "nanditha">>
                Nanditha: Why does everyone keep dying?!?
            <<endif>>
        <<endif>>
        <<if $hugh == true>>
            <<activateemotion "emotionhugh_idle" "h_idle">>
            <<emotionsprite "emotionhugh_idle" "h_idle">>
            <<playrestsound hugh "hugh">>
            <<enablevault>>
            Hugh: The bookcase was concealing a door!
        <<endif>>
    <<endif>>
<<else>>
    //<<set $lock4 = true>>
     <<disablebookshelfold>>
    <<enablebookshelfnew>>
    <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
    <<playrestsound marzanna "marzanna">>
    Marzanna: I'll put the Grimoire back in its place.
    <<slide bookcase_new "Slide_Animation">>
    <<disablebookshelf>>
    <<enablevault>>

    //animation: the bookcase moves aside and reveals the vault door
    //the bookcase-object's interactibility gets replaced by the vault door
    <<emotionsprite "emotionmarzanna_afraid" "mz_afraid">>
    <<playrestsound marzanna "marzanna">>
    Marzanna: What happened?
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_happy" "a_happy">>
        <<playrestsound ashok "ashok">>
        Ashok: It looks like you discovered a secret door, Marzanna!
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_happy" "n_happy">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: Maybe this is the way out!
    <<endif>>
<<endif>>
<<destroyemotion "emotionashok_afraid" "a_afraid">>
<<destroyemotion "emotionnanditha_afraid" "n_afraid">>
<<destroyemotion "emotionnanditha_sad" "n_sad">>
<<destroyemotion "emotionhugh_idle" "h_idle">>
<<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
<<destroyemotion "emotionashok_happy" "a_happy">>
<<destroyemotion "emotionnanditha_happy" "n_happy">>
<<jump room_investigate>>
===

title: interaction3marzanna
color: yellow
group: room3
position: 536,229
---
//object gets activated when the variable $marzanna turns false (it's her dead body/the bookshelf on the floo)

<<set $actions = $actions - 1>>
<<activateemotion "emotionashok_sad" "a_sad">>
<<activateemotion "emotionnanditha_sad" "n_sad">>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<activateemotion "emotionhugh_idle" "h_idle">>
<<activateemotion "emotionhugh_annoyed" "h_annoyed">>
<<activateemotion "emotionmathilda_annoyed" "mt_annoyed">>
<<if (visited_count("interaction3marzanna") == 0) && (visited("interaction1chemicals") == true || visited("interaction4divination") == true || visited("interaction5storage") == true)>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_sad" "a_sad">> 
        <<playrestsound ashok "ashok">>
        Ashok: We can't even retrieve the the things she found, that shelf is way to heavy to lift.
    <<elseif $nanditha == true>>
        <<emotionsprite  "emotionnanditha_sad" "n_sad">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: I can't reach her body under that shelf...
    <<elseif $mathilda == true>>
        <<emotionsprite "emotionmathilda_annoyed" "mt_annoyed">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: This shelf is too heavy to get to her...
    <<elseif $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">>
        <<playrestsound hugh "hugh">>
        Hugh: I can't lift this shelf on my own to retrieve the items she had on her...
    <<endif>>
<<elseif $ashok == false && visited("interaction2plants") == true && $door34 == false && $backupkey34 == true>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_sad" "a_sad">> 
        <<playrestsound ashok "ashok">>
        Ashok: Wait, there's something in the puddle of blood!
    <<elseif $nanditha == true>>
        <<emotionsprite  "emotionnanditha_sad" "n_sad">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: So much blood...
        <<emotionsprite  "emotionnanditha_idle" "n_idle">>
        Nanditha: Oh, there's something shiny!
    <<elseif $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">>
        <<playrestsound hugh "hugh">>
        Hugh: At leats she dropped this key for me before she got crushed.
    <<endif>>
    <<popupsprite "popup3key" "popup3key">>
    Picked up the key from Marzanna's body.
    <<destroypopup "popup3key" "popup3key">>
<<endif>>
<<if (visited_count("interaction3marzanna") > 0)>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_sad" "a_sad">>
        <<playrestsound ashok "ashok">>
        Ashok: I should have helped her...
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_sad" "n_sad">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: She sacrificed herself to reveal this door for us.
    <<endif>>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_idle" "mt_idle">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: Did she expect to find anything in that gap?
    <<endif>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">>
        <<playrestsound hugh "hugh">>
        Hugh: As jumpy as she was, she would have died of a heart attack before we got out anyways.
    <<endif>>
<<endif>>
<<destroyemotion "emotionashok_sad" "a_sad">>
<<destroyemotion "emotionnanditha_sad" "n_sad">>
<<destroyemotion "emotionmathilda_idle" "mt_idle">>
<<destroyemotion "emotionhugh_idle" "h_idle">>
<<destroyemotion "emotionhugh_annoyed" "h_annoyed">>
<<destroyemotion "emotionmathilda_annoyed" "mt_annoyed">>
<<jump room_investigate>>
===


title: vault
tags:
color: yellow
group: room3
position: 539,-742
---
<<set $actions = $actions - 1>>
<<activateemotion "emotionashok_idle" "a_idle">>
<<activateemotion "emotionnanditha_happy" "n_happy">>
<<activateemotion "emotionmathilda_annoyed" "mt_annoyed">>
<<activateemotion "emotionhugh_idle" "h_idle">>
<<activateemotion "emotionmarzanna_embarassed" "mz_embarassed">>
<<activateemotion "emotionnanditha_idle" "n_idle">>
<<activateemotion "emotionhugh_annoyed" "h_annoyed">>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<activateemotion "emotionmathilda_sad" "mt_sad">>
<<activateemotion "emotionmarzanna_idle" "mz_idle">>
<<activateemotion "emotionnanditha_sad" "n_sad">>
<<activateemotion "emotionmarzanna_sad" "mz_sad">>
<<activateemotion "emotionnanditha_afraid" "n_afraid">>
<<if visited_count("vault") == 0>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">>
        <<playrestsound ashok "ashok">>
        Ashok: Looks like a vault door. It appears to have different types of locks.
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_happy" "n_happy">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: This must be the exit! All we need to do is to find a way to unlock it!
    <<endif>>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_annoyed" "mt_annoyed">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: There isn't even a keyhole! How are we supposed to know what we have to look for?
    <<endif>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">>
        <<playrestsound hugh "hugh">>
        Hugh: It's highly unlikely that this is the way out. The has to be an other exit...
        
    <<endif>>
    <<if $marzanna == true>>
        <<emotionsprite "emotionmarzanna_embarassed" "mz_embarassed">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: Even if this is the way out, we're never gonna figure out how to open this massive door.
    <<endif>>
<<endif>>
<<if $item1eye == true && $lock1 == false && $nanditha == true>>
    <<emotionsprite  "emotionnanditha_idle" "n_idle">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: This looks like a retina scanner, you know, from the movies! Maybe it works with the eye I took from the rabbit!
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">>
        <<playrestsound hugh "hugh">>
        Hugh: That sounds just plain stupid.
    <<endif>>
    <<set $lock1 = true>>
    <<lock2 lock2 "lock2">>
    <<wait  1>>
    <<setretinaopensprite "retinascanner_open" "retinascanner_open">>
    //<<playsound unlock>>
    // <<wait  1>>
    <<emotionsprite  "emotionnanditha_happy" "n_happy">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: Sounds like it worked! Yay!!
    <<destroyemotion "emotionnanditha_happy" "n_happy">>
<<elseif $item1eye == true && $lock1 == false && $nanditha == false>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">>
        <<playrestsound ashok "ashok">>
        Ashok: I'm pretty sure my sister would have tried to use the glass eye she found with the scanner.
    <<elseif $mathilda == true>>
        <<emotionsprite "emotionmathilda_sad" "mt_sad">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: Nanditha would have tried to use this glass eye with the scanner.
    <<elseif $marzanna == true>>
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: Maybe the glass eye Nanditha found will work?
        <<if $hugh == true>>
            <<emotionsprite "emotionhugh_annoyed" "h_annoyed">>
            <<playrestsound hugh "hugh">>
            Hugh: That sounds just plain stupid.
        <<endif>>
    <<elseif $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">>
        <<playrestsound hugh "hugh">>
        Hugh: I don't think that a glass eye could pass a retina scanner but I'm out of options here...
    <<endif>>
    <<set $lock1 = true>>
    <<lock2 lock2 "lock2">>
    <<wait  1>>
    <<setretinaopensprite "retinascanner_open" "retinascanner_open">>
<<endif>>
<<if $item2remote == true && $lock2 == false && $mathilda == true>>
    <<emotionsprite "emotionmathilda_idle" "mt_idle">>
    <<playrestsound mathilda "mathilda">>
    Mathilda: Maybe this old remote I found in the greenhouse isn't so useless after all. I'll give it a shot.
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">>
        <<playrestsound ashok "ashok">>
        Ashok: Remote controls are rarely used for vaults, as far as I know.
    <<endif>>
    <<set $lock2 = true>>
      <<lock lock_1 "lock1">>
    //<<playsound unlock>>
     <<wait  1>>
    <<setremoteopensprite "remotescanner_open" "remotescanner_open" >>
    <<emotionsprite "emotionmathilda_happy" "mt_happy">>
    <<playrestsound mathilda "mathilda">>
    
    Mathilda: Neat! I didn't think it would actually work but I guess it just did!
    <<destroyemotion "emotionmathilda_happy" "mt_happy">>
    // <<else>>
    //     <<set $lock2 = true>>
    //     <<setremoteopensprite "remotescanner_open" "remotescanner_open" >>
<<elseif $item2remote == true && $lock2 == false && $mathilda == false>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">>
        <<playrestsound hugh "hugh">>
        Hugh: I think the remote Mathilda found is connected to this door.
    <<elseif $nanditha == true>>
        <<emotionsprite "emotionnanditha_sad" "n_sad">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: This remote will forever remind me of Mathilda...
        <<emotionsprite "emotionnanditha_idle" "n_idle">>
        Nanditha: I wonder what happens if I press the button.
    <<elseif $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">>
        <<playrestsound ashok "ashok">>
        Ashok: Let's try Mathilda's remote control here.
    <<elseif $marzanna == true>>
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: I took this remote from Mathilda... maybe it's for this door?
    <<endif>>
    <<set $lock2 = true>>
    <<setremoteopensprite "remotescanner_open" "remotescanner_open" >>
<<endif>>
<<if $item3code == true && $lock3 == false && $ashok == true>>
    <<emotionsprite "emotionashok_idle" "a_idle">>
    <<playrestsound ashok "ashok">>
    Ashok: There's a dial. I'll try the number combination from the note I found with the letters.
    <<if $nanditha == true && visited("interaction3letters")== true>>
        <<emotionsprite  "emotionnanditha_idle" "n_idle">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: It was a date, right? 23rd of April 1999.
    <<endif>>
    <<set $lock3 = true>>
     <<lock3 lock3 "lock3">>
    <<wait  1>>
        //<<playsound unlock>>
    //  <<wait  1>>
        <<setdialopensprite "diallock_open" "diallock_open" >>
        <<emotionsprite "emotionashok_happy" "a_happy">>
        <<playrestsound ashok "ashok">>
        Ashok: As I expected.
        <<destroyemotion "emotionashok_happy" "a_happy">>
<<elseif $item3code == true && $lock3 == false && $ashok == false>>
    <<if $nanditha == true>>
        <<emotionsprite "emotionnanditha_idle" "n_idle">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: The code my brother found might be the combination to open the lock with the dial.
    <<elseif $marzanna == true>>
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: Ashok found a code, right? Maybe it's for this dial?
    <<elseif $hugh == true>>
        <<emotionsprite "emotionhugh_sad" "h_sad">>
        <<playrestsound hugh "hugh">>
        Hugh: Ashok's code is the only key that would make sense here.
    <<elseif $mathilda == true>>
        <<emotionsprite "emotionmathilda_idle" "mt_idle">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: I guess I'll give this code that I found on Ashok a try...
    <<endif>>
    <<set $lock3 = true>>
    <<lock3 lock3 "lock3">>
    <<wait  1>>
    <<setdialopensprite "diallock_open" "diallock_open" >>
<<endif>>
<<if $item5finger == true && $lock4 == false && $hugh == true>>
    <<if visited("interaction1crate") == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">>
        <<playrestsound hugh "hugh">>
        Hugh: I got this seperated finger that probably belonged to Dr. Fist once. So if this is his vault door, there might be a fingerprint scanner that will recognize it.
    <<else>>
        <<emotionsprite "emotionhugh_idle" "h_idle">>
        <<playrestsound hugh "hugh">>
        Hugh: I got this seperated finger from the body... It sounds laughable, but maybe there's a fingerprint scanner that will recognize it?
    <<endif>>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_annoyed" "mt_annoyed">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: Stop talking and just try it already!
        <<emotionsprite "emotionhugh_sad" "h_sad">>
        <<playrestsound hugh "hugh">>
        Hugh: Sorry, I'll do it now.
    <<endif>>
    <<set $lock4 = true>>
    <<lock4 lock4 "lock4">>
    <<wait  1>>
    <<setfingeropensprite "fingerprint_open" "fingerprint_open" >>
    //<<playsound unlock>>
    //   <<wait  1>>
    <<emotionsprite "emotionhugh_happy" "h_happy">>
    <<playrestsound hugh "hugh">>
    Hugh: This is just ridiculous.
    <<destroyemotion "emotionhugh_happy" "h_happy">>
<<elseif $item5finger == true && $lock4 == false && $hugh == false>>
    <<if $marzanna == true>>
        <<emotionsprite "emotionmarzanna_sad" "mz_sad">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: Hugh took this finger with him so it must be of use, maybe with this scanner?
    <<elseif $mathilda == true>>
        <<emotionsprite "emotionmathilda_sad" "mt_sad">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: Hugh would have known how to open these locks...
        <<emotionsprite "emotionmathilda_idle" "mt_idle">>
        Mathilda: This separated finger he had... maybe it works with this scanner?
    <<elseif $nanditha == true>>
        <<emotionsprite "emotionnanditha_afraid" "n_afraid">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: Ew! I just found this separated finger, I almost forgot we took it from Hugh...
        <<emotionsprite "emotionnanditha_idle" "n_idle">>
        Nanditha: Maybe it can open the scanner lock?
    <<elseif $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">>
        <<playrestsound ashok "ashok">>
        Ashok: Hugh had a separated finger with him... The fingerprint scanner might recognize it.
    <<endif>>
    <<set $lock4 = true>>
    <<lock4 lock4 "lock4">>
    <<wait  1>>
    <<setfingeropensprite "fingerprint_open" "fingerprint_open" >>
<<endif>>
<<if $lock1 == true && $lock2 == true && $lock3 == true && $lock4 == true>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_happy" "h_happy">>
        <<playrestsound hugh "hugh">>
        Hugh: Wow. To be honest I didn't expect us to survive this.
    <<endif>>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_happy" "mt_happy">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: This is the way out!
    <<endif>>
    <<if $marzanna == true>>
        <<emotionsprite "emotionmarzanna_happy" "mz_happy">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: It can't be true! Did we really make it?
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_happy" "n_happy">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: I told you we would find the exit!
    <<endif>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_happy" "a_happy">>
        <<playrestsound ashok "ashok">>
        Ashok: Finally!
    <<endif>>
    <<destroyemotion "emotionashok_happy" "a_happy">>
    <<destroyemotion "emotionhugh_happy" "h_happy">>
    <<destroyemotion "emotionmathilda_happy" "mt_happy">>
    <<destroyemotion "emotionnanditha_happy" "n_happy">>
    <<destroyemotion "emotionmarzanna_happy" "mz_happy">>
    <<jump escape>>
<<endif>>
<<destroyemotion "emotionashok_idle" "a_idle">>
<<destroyemotion "emotionnanditha_happy" "n_happy">>
<<destroyemotion "emotionmathilda_annoyed" "mt_annoyed">>
<<destroyemotion "emotionhugh_idle" "h_idle">>
<<destroyemotion "emotionmarzanna_embarassed" "mz_embarassed">>
<<destroyemotion "emotionashok_happy" "a_happy">>
<<destroyemotion "emotionmathilda_happy" "mt_happy">>
<<destroyemotion "emotionhugh_happy" "h_happy">>
<<destroyemotion "emotionmathilda_sad" "mt_sad">>
<<destroyemotion "emotionmarzanna_idle" "mz_idle">>
<<destroyemotion "emotionnanditha_sad" "n_sad">>
<<destroyemotion "emotionmarzanna_sad" "mz_sad">>
<<destroyemotion "emotionnanditha_afraid" "n_afraid">>
<<disablescenevault>>
<<enableScene6>>
<<jump room_investigate>>
===


title: interaction4altar
tags:
color: purple
group: room4
position: 799,-462
---
//object gets deactivated when the variable $mathilda turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<activateemotion "emotionnanditha_happy" "n_happy">>
<<activateemotion "emotionhugh_annoyed" "h_annoyed">>
<<activateemotion "emotionashok_annoyed" "a_annoyed">>
<<activateemotion "emotionmathilda_happy" "mt_happy">>
<<emotionsprite "emotionmathilda_idle" "mt_idle">> 
<<playrestsound mathilda "mathilda">>
Mathilda: This one here looks almost like an altar with all the candles and these mysterious symbols.
<<if $nanditha == true>>
     <<if visited("interaction1crate") == true>>
        <<emotionsprite  "emotionnanditha_happy" "n_happy">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: Maybe Dr. Fist was also a sorcerer!
    <<else>>
        <<emotionsprite  "emotionnanditha_happy" "n_happy">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: Maybe this house belongs to a sorcerer!
    <<endif>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">>
        <<playrestsound hugh "hugh">>
        Hugh: Don't be ridiculous. An occultist or an alchemist at most, or just a mad man.
    <<endif>>
<<endif>>
<<if $item4candle == false>>
    <<set $item4candle = true>>
    <<emotionsprite "emotionmathilda_idle" "mt_idle">>
    <<playrestsound mathilda "mathilda">>
    Mathilda: I'll take a candle with me. We can use it if the lights go out again.
    <<destroyemotion "emotionmathilda_idle" "mt_idle">>
    <<popupsprite "popup4candle" "popup4candle">>
    Mathilda keeps the candle.
    <<destroypopup "popup4candle" "popup4candle">>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_annoyed" "a_annoyed">> 
        <<playrestsound ashok "ashok">>
        Ashok: It's not even lit...
        <<emotionsprite "emotionmathilda_happy" "mt_happy">> 
        <<playrestsound mathilda "mathilda">>
       Mathilda: All I need is a box of matches or a lighter. I'm pretty sure there's one around.
        <<if visited("interaction1crate") == true>>
            Mathilda: How else would Dr. Fist light all these candles?
        <<endif>>
    <<endif>>
<<else>>
    <<emotionsprite "emotionmathilda_annoyed" "mt_annoyed">> 
    <<playrestsound mathilda "mathilda">>
    Mathilda: I wonder what exactly this weirdo was doing here...
<<endif>>
<<destroyemotion "emotionmathilda_annoyed" "mt_annoyed">>
<<destroyemotion "emotionmathilda_happy" "mt_happy">>
<<jump room_investigate>>
===

title: interaction4vase
tags:
color: purple
group: room4
position: 804,-328
---
//object gets deactivated when the variable $nanditha turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionnanditha_happy" "n_happy">>
<<activateemotion "emotionashok_idle" "a_idle">>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<activateemotion "emotionhugh_annoyed" "h_annoyed">>
<<if $key45 == false>>
    <<emotionsprite  "emotionnanditha_happy" "n_happy">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: Wow, this vase is so pretty!
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">>
        <<playrestsound ashok "ashok">>
        Ashok: It looks quite exotic... and fragile! Better be careful with it.
    <<endif>>
    //<<playsound vase_shatter>>
    <<setvasesprite "vase_triggered" "vase_triggered">> //also replace the the vase_idle sprite with the vase_broken sprite
    //<<wait 1>>
    <<emotionsprite  "emotionnanditha_sad" "n_sad">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: I'm so clumsy! I shouldn't have touched it.
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_idle" "mt_idle">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: What's that?
    <<endif>>
    <<set $key45 = true>>
    <<emotionsprite  "emotionnanditha_idle" "n_idle">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: There was something inside...
    <<destroyemotion "emotionnanditha_idle" "n_idle">>
    <<popupsprite "popup4key" "popup4key">>
    Nanditha found a key!
    <<destroypopup "popup4key" "popup4key">>
    <<activateemotion "emotionnanditha_happy" "n_happy">>
    <<emotionsprite  "emotionnanditha_happy" "n_happy">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: It's a key! So it was good I broke the vase after all!
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">>
        <<playrestsound hugh "hugh">>
        Hugh: I'm pretty sure you could have gotten this key out of the vase without destroying it.
    <<endif>>
<<else>>
    <<emotionsprite  "emotionnanditha_sad" "n_sad">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: What a pity...
<<endif>>
<<destroyemotion "emotionnanditha_happy" "n_happy">>
<<destroyemotion "emotionhugh_annoyed" "h_annoyed">>
<<destroyemotion "emotionnanditha_sad" "n_sad">>
<<jump room_investigate>>
===

title: interaction4divination
tags:
color: purple
group: room4
position: 799,-190
---
//object gets deactivated when the variable $marzanna turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionmarzanna_idle" "mz_idle">>
<<activateemotion "emotionmarzanna_happy" "mz_happy">>
<<activateemotion "emotionashok_idle" "a_idle">>
<<activateemotion "emotionhugh_sad" "h_sad">>
<<if $item5card == true>>
    <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
    <<playrestsound marzanna "marzanna">>
    Marzanna: I'm pretty sure this is where the Tarot card belongs.
<<if $item4grimoire == false>>
    <<set $item4grimoire = true>>
    <<popupsprite "popup4grimoire" "popup4grimoire">>
    Marzanna found a Grimoire!
    <<destroypopup "popup4grimoire" "popup4grimoire">>
    <<emotionsprite "emotionmarzanna_happy" "mz_happy">>
    <<playrestsound marzanna "marzanna">>
    Marzanna: This is a spellbook! And a pretty old one, too! These are really hard to get.
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">>
        <<playrestsound ashok "ashok">>
        Ashok: Are you interested in that kind of stuff?
        <<emotionsprite "emotionmarzanna_embarassed" "mz_embarassed">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: Uhm... I guess it's quite a weird hobby...
        <<emotionsprite "emotionashok_embarassed" "a_embarassed">>
        <<playrestsound ashok "ashok">>
        Ashok: Sorry, I didn't want to imply that.
    <<endif>>
    <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
    <<playrestsound marzanna "marzanna">>
    Marzanna: It has the same width as the gap in the library bookcase.
    <<endif>>
<<else>>
    <<if visited("interaction1crate") == true>>
        <<emotionsprite "emotionmarzanna_happy" "mz_happy">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: Dr. Fist seemed to be into divination. I wonder if he had foreseen that he'd end up torn apart on the floor.
        <<if $hugh == true>>
            <<emotionsprite "emotionhugh_sad" "h_sad">>
            <<playrestsound hugh "hugh">>
            Hugh: ...
        <<endif>>
    <<else>>
        <<emotionsprite "emotionmarzanna_happy" "mz_happy">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: This is quite a respectable collection.
    <<endif>>
<<endif>>
<<destroyemotion "emotionmarzanna_idle" "mz_idle">>
<<destroyemotion "emotionmarzanna_happy" "mz_happy">>
<<destroyemotion "emotionhugh_sad" "h_sad">>
<<jump room_investigate>>
===

title: interaction4effigies
tags:
color: purple
group: room4
position: 799,-45
---
//object gets deactivated when the variable $hugh turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionhugh_idle" "h_idle">>
<<activateemotion "emotionmarzanna_idle" "mz_idle">>
<<activateemotion "emotionhugh_happy" "h_happy">>
<<if visited_count("interaction4effigies") == 0>>
    <<emotionsprite "emotionhugh_idle" "h_idle">> 
    <<playrestsound hugh "hugh">>
    Hugh: These look like real voodoo dolls... What a collection.
    <<if $marzanna == true>>
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: Be careful, these effigies are dangerous! They can bear deadly curses.
        <<emotionsprite "emotionhugh_happy" "h_happy">> 
        <<playrestsound hugh "hugh">>
        Hugh: I guess I should consider myself lucky that I'm not superstitious. People need to believe in that kind of stuff to make it work.
    <<endif>>
    <<destroyemotion "emotionhugh_idle" "h_idle">>
    <<destroyemotion "emotionhugh_happy" "h_happy">>
<<else>>
    <<emotionsprite "emotionhugh_idle" "h_idle">> 
    <<playrestsound hugh "hugh">>
    Hugh: This one looks espacially strange...
    <<destroyemotion "emotionhugh_idle" "h_idle">>
    <<set $hugh = false>>
    <<playrestsound death_hugh "death_hugh">>
    <<enabledeathHugh>>
    Hugh: AAARGH!
    <<disableHugh>>
    <<activateemotion "emotionmarzanna_afraid" "mz_afraid">>
    <<activateemotion "emotionmarzanna_sad" "mz_sad">>
    <<activateemotion "emotionmathilda_scream" "mt_scream">>
    <<activateemotion "emotionnanditha_afraid" "n_afraid">>
    <<activateemotion "emotionashok_annoyed" "a_annoyed">>
    <<disabledeathHugh>>
    <<enableHughCorpse>>
    <<enableHughDeath>>
    <<set $key23 = false>>
    <<set $item3key = false>>
    <<set $item5finger = false>>
    <<if $marzanna == true>>
        <<emotionsprite "emotionmarzanna_afraid" "mz_afraid">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: HUGH!
        <<emotionsprite  "emotionmarzanna_sad" "mz_sad">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: No no no no no no no not him! It can't be!
    <<endif>>
    <<if $mathilda == true>>
        <<emotionsprite  "emotionmathilda_scream" "mt_scream">> 
        <<playrestsound mathilda "mathilda">>
        Mathilda: Hugh, are you alright?!
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_afraid" "n_afraid">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: What happened?
        <<if $marzanna == true>>
            <<emotionsprite  "emotionmarzanna_sad" "mz_sad">>
            <<playrestsound marzanna "marzanna">>
            Marzanna: He got cursed.
        <<endif>>
    <<endif>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_annoyed" "a_annoyed">> 
        <<playrestsound ashok "ashok">>
        Ashok: This arrogant prick had it coming.
    <<endif>>
<<endif>>
<<destroyemotion "emotionmarzanna_sad" "mz_sad">>
<<destroyemotion "emotionmathilda_scream" "mt_scream">>
<<destroyemotion "emotionnanditha_afraid" "n_afraid">>
<<destroyemotion "emotionashok_annoyed" "a_annoyed">>
<<jump room_investigate>>
===

title: interaction4gems
tags:
color: purple
group: room4
position: 799,82
---
//object gets deactivated when the variable $ashok turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionashok_idle" "a_idle">>
<<emotionsprite "emotionashok_idle" "a_idle">> 
<<playrestsound ashok "ashok">>
Ashok: I wonder how much this collection of gemstones is worth.
<<destroyemotion "emotionashok_idle" "a_idle">>
<<jump room_investigate>>
===

title: interaction4hugh
tags:
color: purple
group: room4
position: 803,229
---
//object gets activated when the variable $hugh turns false (it's his dead body)
<<set $actions = $actions - 1>>
<<activateemotion "emotionmarzanna_sad" "mz_sad">>
<<activateemotion "emotionmathilda_sad" "mt_sad">>
<<activateemotion "emotionnanditha_afraid" "n_afraid">>
<<activateemotion "emotionashok_idle" "a_idle">>
<<activateemotion "emotionnanditha_idle" "n_idle">>
<<activateemotion "emotionashok_happy" "a_happy">> 
<<if (visited_count("interaction4hugh") == 0) && (visited("interaction2can") == true || visited("interaction3orrery") == true || visited("interaction5cage") == true)>>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_sad" "mt_sad">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: He was the most intelligent among us... I bet he has something of use on him.
    <<elseif $marzanna == true>>
        <<emotionsprite "emotionmarzanna_sad" "mz_sad">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: I will take this to remind me of him...
    <<elseif $nanditha == true>>
        <<emotionsprite  "emotionnanditha_idle" "n_idle">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: He was clever, I'm sure he has something useful on him.
    <<elseif $ashok == true>>
        <<emotionsprite "emotionashok_happy" "a_happy">> 
        <<playrestsound ashok "ashok">>
        Ashok: You won't need this anymore, wiseacre.
    <<endif>>
    <<if visited("interaction2can") == true>>
        <<set $key23 = true>>
        <<popupsprite "popup2key" "popup2key">>
        Picked up the key from Hugh's body.
        <<destroypopup "popup2key" "popup2key">>
    <<endif>>
    <<if visited("interaction3orrery") == true>>
        <<set $item3key = true>>
        <<popupsprite "popup3cagekey" "popup3cagekey">>
        Picked up the key from Hugh's body.
        <<destroypopup "popup3cagekey" "popup3cagekey">>
    <<endif>>
    <<if visited("interaction5cage") == true && visited("interaction3orrery") == true>>
        <<set $item5finger = true>>
        <<popupsprite "popup5finger" "popup5finger">>
        Picked up the separated finger from Hugh's body.
        <<destroypopup "popup5finger" "popup5finger">>
    <<endif>>
<<else>>
    <<if $marzanna == true>>
        <<emotionsprite  "emotionmarzanna_sad" "mz_sad">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: The effigy was cursed! I tried to warn him, why didn't he listen to me?
    <<endif>>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_sad" "mt_sad">> 
        <<playrestsound mathilda "mathilda">>
        Mathilda: How is that even possible?
    <<endif>>
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_afraid" "n_afraid">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: He just touched it! What is wrong with this place?
    <<endif>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">> 
        <<playrestsound ashok "ashok">>
        Ashok: What did he expect to find there anyways?
    <<endif>>
<<endif>>
<<destroyemotion "emotionmarzanna_sad" "mz_sad">>
<<destroyemotion "emotionmathilda_sad" "mt_sad">>
<<destroyemotion "emotionnanditha_afraid" "n_afraid">>
<<destroyemotion "emotionashok_idle" "a_idle">>
<<jump room_investigate>>
===


title: interaction5apparatus
tags:
color: blue
group: room5
position: 1060,-462
---
//object gets deactivated when the variable $ashok turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionashok_happy" "a_happy">>
<<activateemotion "emotionnanditha_happy" "n_happy">>
<<activateemotion "emotionashok_idle" "a_idle">>
<<if $key51 == false>>
    <<set $key51 = true>>
    <<popupsprite "popup5key" "popup5key">>
    Ashok found a key!
    <<destroypopup "popup5key" "popup5key">>
    <<emotionsprite "emotionashok_happy" "a_happy">> 
    <<playrestsound ashok "ashok">>
    Ashok: Look at that, someone left a key lying here.
    <<if $nanditha == true>>
        <<emotionsprite  "emotionnanditha_happy" "n_happy">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: Congrats, brother! Maybe it's even the final one that will get us out of here!
    <<endif>>
<<else>>
    <<if visited("interaction1crate") == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">> 
        <<playrestsound ashok "ashok">>
        Ashok: I guess this confirms it: Dr. Fist was an alchemist.
    <<else>>
        <<emotionsprite "emotionashok_idle" "a_idle">> 
        <<playrestsound ashok "ashok">>
        Ashok: This looks like an alchemist's laboratory.
    <<endif>>
<<endif>>
<<destroyemotion "emotionashok_happy" "a_happy">>
<<destroyemotion "emotionnanditha_happy" "n_happy">>
<<destroyemotion "emotionashok_idle" "a_idle">>
<<jump room_investigate>>
===

title: interaction5storage
tags:
color: blue
group: room5
position: 1058,-327
---
//object gets deactivated when the variable $marzanna turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionmarzanna_afraid" "mz_afraid">>
<<activateemotion "emotionmarzanna_idle" "mz_idle">>
<<activateemotion "emotionashok_idle" "a_idle">>
<<if $item5card == false>>
    <<set $item5card = true>>
    <<popupsprite "popup5card" "popup5card">>
    Marzanna found a Tarot card!
    <<destroypopup "popup5card" "popup5card">>
    <<emotionsprite "emotionmarzanna_afraid" "mz_afraid">> 
    <<playrestsound marzanna "marzanna">>
    Marzanna: The moon... that's not a good sign.
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">> 
        <<playrestsound ashok "ashok">>
        Ashok: Why was there a single card in the storage shelf?
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: Maybe as a warning: Getting out of here won't be as easy as we think.
    <<endif>>
<<else>>
    <<emotionsprite "emotionmarzanna_idle" "mz_idle">> 
    <<playrestsound marzanna "marzanna">>
    Marzanna: This was the only card here...
<<endif>>
<<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
<<destroyemotion "emotionmarzanna_idle" "mz_idle">>
<<jump room_investigate>>
===

title: interaction5generator
tags:
color: blue
group: room5
position: 1067,-187
---
//object gets deactivated when the variable $nanditha turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionnanditha_idle" "n_idle">>
<<activateemotion "emotionhugh_annoyed" "h_annoyed">>
<<if visited_count("interaction5generator") == 0>>
    <<emotionsprite  "emotionnanditha_idle" "n_idle">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: What a huge machine. I wonder what it's for?
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">>
        <<playrestsound hugh "hugh">>
        Hugh: I would advise you not to get too close. It looks like an really old steam engine, maybe a generator.
    <<endif>>
    <<destroyemotion "emotionnanditha_idle" "n_idle">>
    <<destroyemotion "emotionhugh_annoyed" "h_annoyed">>
<<else>>
    <<emotionsprite  "emotionnanditha_happy" "n_happy">>
    <<playrestsound nanditha "nanditha">>
    Nanditha: Uh, a lever. Let's see what it does!
    <<destroyemotion "emotionnanditha_idle" "n_idle">>
     <<playrestsound death_nanditha "death_nanditha">>
    <<enabledeathNanditha>>
    //<<popupsprite "emotionnanditha_death" "n_death">>
    Nanditha: OH!
    <<set $nanditha = false>>
   
    <<disabledeathNanditha>>
    <<disableNanditha>>
    <<set $item1eye = false>>
    <<set $item2carrot = false>>
    <<set $key45 = false>>
    <<if $ashok == false && $backupkey51 == true && $door51 == false>>
        <<set $key51 = false>>
    <<endif>>
    <<setgeneratorsprite "generator_triggered" "generator_triggered">>
    <<enableNandithaDeath>>
    //nanditha get's electrocuted, the generator shuts down
    <<if visited("room1_enter") == true>>
        <<set $light = false>>
        <<darkmodeon>> //the lights turn off, the scene is black
    <<endif>>
    <<activateemotion "emotionmathilda_afraid" "mt_afraid">>
    <<activateemotion "emotionmathilda_sad" "mt_sad">>
    <<activateemotion "emotionashok_afraid" "a_afraid">>
    <<activateemotion "emotionhugh_annoyed" "h_annoyed">>
    <<activateemotion "emotionmarzanna_afraid" "mz_afraid">>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_afraid" "mt_afraid">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: NANDITHA! Are you alright?
        <<if $light == false>>
            <<if $candle == true>>
                <<emotionsprite "emotionmathilda_sad" "mt_sad">>
                <<playrestsound mathilda "mathilda">>
                Mathilda: She's not breathing...
            <<elseif $item4candle == true>>
                <<emotionsprite "emotionmathilda_sad" "mt_sad">>
                <<playrestsound mathilda "mathilda">>
                Mathilda: I need to light the candle so we can see what happened!
            <<else>>
                <<emotionsprite "emotionmathilda_sad" "mt_sad">>
                <<playrestsound mathilda "mathilda">>
                Mathilda: She's not answering...
            <<endif>>
        <<else>>
            <<emotionsprite "emotionmathilda_sad" "mt_sad">>
            <<playrestsound mathilda "mathilda">>
            Mathilda: Why did she have to touch that stupid machine? 
        <<endif>>
    <<endif>>
    <<if $ashok == true>>
        <<if $light == true>>
            <<emotionsprite "emotionashok_afraid" "a_afraid">>
            <<playrestsound ashok "ashok">>
            Ashok: Sister! No, it can't be! Not you!
        <<else>>
            <<emotionsprite "emotionashok_afraid" "a_afraid">>
            <<playrestsound ashok "ashok">>
            Ashok: Sister! Why aren't the lights turning back on?
        <<endif>>
    <<endif>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">>
        <<playrestsound hugh "hugh">>
        Hugh: I told her not to get too close.
        <<if $light == false>>
            Hugh: Now the lights are out for good.
        <<endif>>
    <<endif>>
    <<if $marzanna == true>>
        <<emotionsprite "emotionmarzanna_afraid" "mz_afraid">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: Death awaits wherever we go.
    
    <<endif>>
<<endif>>
<<destroyemotion "emotionmathilda_sad" "mt_sad">>
<<destroyemotion "emotionashok_afraid" "a_afraid">>
<<destroyemotion "emotionhugh_annoyed" "h_annoyed">>
<<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
 
<<jump room_investigate>>
===

title: interaction5cage
tags:
color: blue
group: room5
position: 1073,-50
---
//object gets deactivated when the variable $hugh turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionhugh_idle" "h_idle">>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<activateemotion "emotionmathilda_annoyed" "mt_annoyed">>
<<activateemotion "emotionashok_idle" "a_idle">>
<<activateemotion "emotionmarzanna_idle" "mz_idle">>
<<activateemotion "emotionhugh_happy" "h_happy">>
<<activateemotion "emotionhugh_afraid" "h_afraid">>
<<emotionsprite "emotionhugh_idle" "h_idle">> 
<<playrestsound hugh "hugh">>
Hugh: This is an animal cage and judging from the smell, it had been inhabited recently.
<<if $item5finger == false>>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_idle" "mt_idle">>
        <<playrestsound mathilda "mathilda">>
        Marthilda: What's that inside?
        <<emotionsprite "emotionhugh_idle" "h_idle">>
        <<playrestsound hugh "hugh">>
        Hugh: Looks like... a finger?
        <<emotionsprite "emotionmathilda_annoyed" "mt_annoyed">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: Gross!
    <<endif>>
    <<if $ashok == true && visited("interaction1crate") == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">>
        <<playrestsound ashok "ashok">>
        Ashok: I guess we weren't supposed to be organ donors but rather food for this creature.
    <<endif>>
    <<if $marzanna == true && $item3key == true>>
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: Maybe your special key fits here...
    <<endif>>
    <<if $item3key == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">>
        <<playrestsound hugh "hugh">>
        Hugh: Ok, I'll try the orrery key and take a closer look at what's inside.
        <<playsound cage_opens>>
        //<<wait 2>>
        <<emotionsprite "emotionhugh_happy" "h_happy">>
        <<playrestsound hugh "hugh">>
        Hugh: Finally! I knew this key had to be useful at some point!
        <<if $mathilda == true>>
            <<emotionsprite "emotionmathilda_idle" "mt_idle">>
            <<playrestsound mathilda "mathilda">>
            Mathilda: Is there really a finger?
            <<emotionsprite "emotionhugh_afraid" "h_afraid">>
            <<playrestsound hugh "hugh">>
            Hugh: Definitely... and the blood on it hasn't dried yet!
            <<destroyemotion "emotionhugh_afraid" "h_afraid">>
            <<set $item5finger = true>>
            <<popupsprite "popup5finger" "popup5finger">>
            Hugh found a seperated finger!
            <<destroypopup "popup5finger" "popup5finger">>
        <<else>>
            <<emotionsprite "emotionhugh_afraid" "h_afraid">>
            <<playrestsound hugh "hugh">>
            Hugh: There's a finger inside... and the blood on it hasn't dried yet!
            <<destroyemotion "emotionhugh_afraid" "h_afraid">>
            <<set $item5finger = true>>
            <<popupsprite "popup5finger" "popup5finger">>
            Hugh found a seperated finger!
            <<destroypopup "popup5finger" "popup5finger">>
        <<endif>>
    <<endif>>
<<endif>>
<<if $actions <= 25>>
    <<activateemotion "emotionhugh_sad" "h_sad">>
    <<emotionsprite "emotionhugh_sad" "h_sad">>
    <<playrestsound hugh "hugh">>
    Hugh: The creature that was kept in this cage might be the thing that we've been hearing...
    <<destroyemotion "emotionhugh_sad" "h_sad">>
<<endif>>
<<jump room_investigate>>
===

title: interaction5burner
tags:
color: blue
group: room5
position: 1060,82
---
//object gets deactivated when the variable $mathilda turns false
<<set $actions = $actions - 1>>
<<activateemotion "emotionmathilda_happy" "mt_happy">>
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<if $item4candle == true && $candle == false>>
    <<emotionsprite "emotionmathilda_happy" "mt_happy">>
    <<playrestsound mathilda "mathilda">>
    Mathilda: Nice! I can light my candle with this burner!
    <<setburnersprite "burner_triggered" "burner_triggered">> 
    <<destroyemotion "emotionmathilda_happy" "mt_happy">>
    <<set $candle = true>>
     <<darkmodeoff>>
    Mathilda lights the candle.
<<elseif $item4candle == false>>
    <<activateemotion "emotionmathilda_idle" "mt_idle">>
    <<emotionsprite "emotionmathilda_idle" "mt_idle">>
    <<playrestsound mathilda "mathilda">>
    Mathilda: I wish this burner was portable. We wouldn't have to worry about the flickering lights anymore.
<<else>>
    <<emotionsprite "emotionmathilda_happy" "mt_happy">>
    <<playrestsound mathilda "mathilda">>
    Mathilda: These bunsen burners have always been my favourite part about chemistry class.
<<endif>>
<<destroyemotion "emotionmathilda_idle" "mt_idle">>
<<destroyemotion "emotionmathilda_happy" "mt_happy">>
<<jump room_investigate>>
===

title: interaction5nanditha
tags:
color: blue
group: room5
position: 1066,220
---
//object gets activated when the variable $nanditha turns false (it's her dead body)

<<set $actions = $actions - 1>>
<<activateemotion "emotionashok_sad" "a_sad">>
<<activateemotion "emotionmathilda_sad" "mt_sad">>
<<activateemotion "emotionmarzanna_afraid" "mz_afraid">>
<<activateemotion "emotionhugh_annoyed" "h_annoyed">>
<<activateemotion "emotionmarzanna_idle" "mz_idle">>
<<activateemotion "emotionhugh_idle" "h_idle">> 
<<activateemotion "emotionashok_idle" "a_idle">>
<<if (visited_count("interaction5nanditha") == 0) && (visited("interaction1animal") == true || visited("interaction2patch") == true || visited("interaction4vase") == true)>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_sad" "a_sad">> 
        <<playrestsound ashok "ashok">>
        Ashok: Thank you sister, for finding something useful.
    <<elseif $mathilda == true>>
        <<emotionsprite "emotionmathilda_sad" "mt_sad">>
        <<playrestsound mathilda "mathilda">>
        Mathilda: Nanditha was smart in her own way, look what she found, I bet it will get us out of here.
    <<elseif $marzanna == true>>
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: We should look through her ashes to see if she had something we could use...
    <<elseif $hugh == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">> 
        <<playrestsound hugh "hugh">>
        Hugh: I hope at least she found something of use for us.
    <<endif>>
    <<if visited("interaction2patch") == true>>
        <<if $mathilda == true>>
            <<emotionsprite "emotionmathilda_sad" "mt_sad">>
            <<playrestsound mathilda "mathilda">>
            Mathilda: The carrot probably turned into ashes aswell...
        <<elseif $hugh == true>>
            <<emotionsprite "emotionhugh_idle" "h_idle">> 
            <<playrestsound hugh "hugh">>
            Hugh: I guess the carrot did not survive the electrocution either.
        <<endif>>  
    <<endif>>
    <<if visited("interaction1animal") == true && visited("interaction2patch") == true>>
        <<set $item1eye = true>>
        <<popupsprite "popup1eye" "popup1eye">>
        Picked up the glass eye from Nanditha's body.
        <<destroypopup "popup1eye" "popup1eye">>
    <<endif>>
    <<if visited("interaction4vase") == true>>
        <<set $key45 = true>>
        <<popupsprite "popup4key" "popup4key">>
        Picked up the key from Nanditha's body.
        <<destroypopup "popup4key" "popup4key">>
    <<endif>>
<<elseif $mathilda == false && visited("interaction3telescope") == true && $door51 == false && $backupkey51 == true>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_idle" "a_idle">>
        <<playrestsound ashok "ashok">>
        Ashok: 
    <<elseif $marzanna == true>>
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: Wait, what's that?
    <<elseif $hugh == true>>
        <<emotionsprite "emotionhugh_idle" "h_idle">> 
        <<playrestsound hugh "hugh">>
        Hugh: I almost forgot to take the telescope key.
    <<endif>>
    <<popupsprite "popup5key" "popup5key">>
    Picked up the key from Nanditha's body.
    <<destroypopup "popup5key" "popup5key">>
<<endif>>
<<if (visited_count("interaction5nanditha") > 0)>>
    <<if $ashok == true>>
        <<emotionsprite "emotionashok_sad" "a_sad">> 
        <<playrestsound ashok "ashok">>
        Ashok: My beloved sister...
    <<endif>>
    <<if $mathilda == true>>
        <<emotionsprite "emotionmathilda_sad" "mt_sad">> 
        <<playrestsound mathilda "mathilda">>
        Mathilda: She did not deserve to die like this.
    <<endif>>
    <<if $marzanna == true>>
        <<emotionsprite "emotionmarzanna_afraid" "mz_afraid">> 
        <<playrestsound marzanna "marzanna">>
        Marzanna: Just a pile of ashes is left of her...
    <<endif>>
    <<if $hugh == true>>
        <<emotionsprite "emotionhugh_annoyed" "h_annoyed">> 
        <<playrestsound hugh "hugh">>
        Hugh: I warned her.
    <<endif>>
<<endif>>
<<destroyemotion "emotionashok_sad" "a_sad">>
<<destroyemotion "emotionmathilda_sad" "mt_sad">>
<<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
<<destroyemotion "emotionhugh_annoyed" "h_annoyed">>
<<destroyemotion "emotionmarzanna_idle" "mz_idle">>
<<destroyemotion "emotionhugh_idle" "h_idle">> 
<<destroyemotion "emotionashok_idle" "a_idle">>
<<jump room_investigate>>
===


title: door12
tags:
color: white
group: doors
position: 180,450
---
<<activateemotion "emotionnanditha_idle" "n_idle">>
<<activateemotion "emotionashok_happy" "a_happy">>
<<if $door12 == false>>
    <<if $key12 == false>> //if the player did not offer the key yet
        <<emotionsprite  "emotionnanditha_idle" "n_idle">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: The door is locked, we need to find a key first!
        <<destroyemotion "emotionnanditha_idle" "n_idle">>
        <<jump room_investigate>>
    <<else>>
        <<set $actions = $actions - 1>>
        <<emotionsprite "emotionashok_happy" "a_happy">> 
        <<playrestsound ashok "ashok">>
        Ashok: Hey Marzanna, try to use the key you found on this door!
        <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: Uhm, okay...
        // <<playsound door_opens>>
        //  <<wait 1>>
        <<emotionsprite  "emotionnanditha_happy" "n_happy">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: Yes, it worked! Let's get out of here!
        <<destroyemotion "emotionnanditha_happy" "n_happy">>
        <<set $door12 = true>>
        <<jump room2_enter>>
    <<endif>>
<<else>>
    <<set $actions = $actions - 1>>
    <<jump room2_enter>>
<<endif>>

===

title: door23
tags:
color: white
group: doors
position: -374,428
---
<<activateemotion "emotionmarzanna_idle" "mz_idle">>
<<activateemotion "emotionhugh_happy" "h_happy">>
<<if $door23 == false>>
    <<if $key23 == false>> //if the player did not offer the key yet
      <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
      <<playrestsound marzanna "marzanna">>
        Marzanna: I can't open it, maybe there's an other key somewhere?
         <<destroyemotion "emotionmarzanna_idle" "mz_idle">>
        <<jump room_investigate>>
    <<else>>
        <<set $actions = $actions - 1>>
        <<emotionsprite "emotionhugh_happy" "h_happy">>
        <<playrestsound hugh "hugh">>
        Hugh: This should be the right key!
        //<<playsound door_opens>>
        //  <<wait 2>>
        <<emotionsprite "emotionmarzanna_happy" "mz_happy">>
        <<playrestsound marzanna "marzanna">>
        Marzanna: Thank you, Hugh!
        <<destroyemotion "emotionmarzanna_happy" "mz_happy">>
        <<set $door23 = true>>
        // <<flickerlights1>>
        <<jump room3_enter>>
    <<endif>>
<<else>>
    <<set $actions = $actions - 1>>
    <<jump room3_enter>>
<<endif>>
<<destroyemotion "emotionmarzanna_idle" "mz_idle">>
<<destroyemotion "emotionmarzanna_happy" "mz_happy">>
===

title: door34
tags:
color: white
group: doors
position: 687,419
---
<<activateemotion "emotionmathilda_idle" "mt_idle">>
<<activateemotion "emotionhugh_annoyed" "h_annoyed">>
<<activateemotion "emotionmarzanna_idle" "mz_idle">>
<<activateemotion "emotionhugh_happy" "h_happy">>
<<activateemotion "emotionnanditha_idle" "n_idle">>
<<activateemotion "emotionmathilda_happy" "mt_happy">>
<<activateemotion "emotionnanditha_happy" "n_happy">>
<<if $door34 == false>>
    <<if $key34 == false>> //if the player did not find the key yet
        <<if $mathilda == true>>
            <<emotionsprite "emotionmathilda_idle" "mt_idle">>
            <<playrestsound mathilda "mathilda">>
            Mathilda: Here we go again, it's locked.
        <<else>>
           <<emotionsprite "emotionhugh_annoyed" "h_annoyed">>
           <<playrestsound hugh "hugh">>
           Hugh: Of course, it's locked. Maybe we should go back and search the other rooms for keys again...
        <<endif>>
        <<if $item3key == true>>
            <<if $marzanna == true>>
                <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
                <<playrestsound marzanna "marzanna">>
                Marzanna: Hugh...
            <<endif>>
            <<emotionsprite "emotionhugh_happy" "h_happy">>
            <<playrestsound hugh "hugh">>
            Hugh: Lucky for us, I just found what's needed to open it.
            // <<wait 2>>
            <<emotionsprite "emotionhugh_angry" "h_angry">>
            <<playrestsound hugh "hugh">>
            Hugh: Damn!
            <<destroyemotion "emotionhugh_angry" "h_angry">>
            <<if $ashok == true>>
                <<emotionsprite "emotionashok_happy" "a_happy">>
                <<playrestsound ashok "ashok">>
                Ashok: Seems like it doesn't fit.
            <<endif>>
        <<endif>>
        <<emotionsprite  "emotionnanditha_idle" "n_idle">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: There shurely is a fitting key somewhere!         
        <<destroyemotion "emotionmathilda_idle" "mt_idle">>
        <<destroyemotion "emotionhugh_annoyed" "h_annoyed">>
        <<destroyemotion "emotionmarzanna_idle" "mz_idle">>
        <<destroyemotion "emotionhugh_angry" "h_angry">>
        <<destroyemotion "emotionashok_happy" "a_happy">>
        <<destroyemotion "emotionnanditha_idle" "n_idle">>
        <<jump room_investigate>>
    <<else>>
        <<set $actions = $actions - 1>>
        <<if $mathilda == true>>
           <<emotionsprite "emotionmathilda_happy" "mt_happy">>
           <<playrestsound mathilda "mathilda">>
           Mathilda: My key fits!
        <<elseif $marzanna == true && visited("interaction3globe") == false && $backupkey34 == true>>
            <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
            <<playrestsound marzanna "marzanna">>
            Marzanna: Maybe the key from the plants fits here?
        <<else>>
            <<emotionsprite  "emotionnanditha_idle" "n_idle">>
            <<playrestsound nanditha "nanditha">>
            Nanditha: Let's try this key.
            <<if $ashok == true>>
                <<emotionsprite "emotionashok_idle" "a_idle">>
                <<playrestsound ashok "ashok">>
                Ashok: Is that the one...
                <<emotionsprite  "emotionnanditha_sad" "n_sad">>
                <<playrestsound nanditha "nanditha">>
                Nanditha: ...that we picked up from her dead body? Yes.
                <<emotionsprite "emotionashok_happy" "a_happy">>
                <<playrestsound ashok "ashok">>
                Ashok: Good idea, sister!
            <<endif>>
        <<endif>>
        //<<playsound door_opens>>
        <<emotionsprite  "emotionnanditha_happy" "n_happy">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: I'm sure we'll be out of here soon!
        <<set $door34 = true>>
        //<<flickerlights1>>
        <<destroyemotion "emotionmathilda_happy" "mt_happy">>
        <<destroyemotion "emotionmarzanna_idle" "mz_idle">>
        <<destroyemotion "emotionnanditha_idle" "n_idle">>
        <<destroyemotion "emotionashok_happy" "a_happy">>
        <<destroyemotion "emotionnanditha_happy" "n_happy">>
        <<jump room4_enter>>
    <<endif>>
<<else>>
    <<set $actions = $actions - 1>>
    <<jump room4_enter>>
<<endif>>
 
===

title: door45
tags:
color: white
group: doors
position: 946,417
---
<<activateemotion "emotionhugh_happy" "h_happy">>
<<activateemotion "emotionhugh_angry" "h_angry">>
<<activateemotion "emotionhugh_idle" "h_idle">>
<<activateemotion "emotionashok_idle" "a_idle">>
<<activateemotion "emotionnanditha_idle" "n_idle">>
<<activateemotion "emotionnanditha_happy" "n_happy">>
<<activateemotion "emotionmathilda_happy" "mt_happy">>
<<if $door45 == false>>
    <<if $key45 == false>> //if the player did not find the key yet
        <<if $hugh == true>> 
            <<if $item3key == true && $item5finger == false>>
                <<emotionsprite "emotionhugh_happy" "h_happy">>
                <<playrestsound hugh "hugh">>
                Hugh: Maybe this is the right door for my key.
                //<<wait  2>>
                <<emotionsprite "emotionhugh_angry" "h_angry">>
                <<playrestsound hugh "hugh">>
                Hugh: Useless thing!
                <<destroyemotion "emotionhugh_angry" "h_angry">>
            <<else>>
                <<emotionsprite "emotionhugh_idle" "h_idle">>
                <<playrestsound hugh "hugh">>
                Hugh: Why am I still expecting that there could be an unlocked door for once?
            <<endif>>
        <<elseif $ashok == true>>
            <<emotionsprite "emotionashok_idle" "a_idle">>
            <<playrestsound ashok "ashok">>
            Ashok: We didn't find the key yet. Maybe we should go back and look for clues in one of the other rooms.
        <<else>>
            <<emotionsprite  "emotionnanditha_idle" "n_idle">>
            <<playrestsound nanditha "nanditha">>
            Nanditha: I hoped at least once there would be an unlocked door but I was wrong.
        <<endif>>
        <<destroyemotion "emotionhugh_angry" "h_angry">>
        <<destroyemotion "emotionhugh_idle" "h_idle">>
        <<destroyemotion "emotionashok_idle" "a_idle">>
        <<destroyemotion "emotionnanditha_idle" "n_idle">>
        <<jump room_investigate>>
    <<else>>
        <<set $actions = $actions - 1>>
        <<emotionsprite  "emotionnanditha_happy" "n_happy">>
        <<playrestsound nanditha "nanditha">>
        Nanditha: It must be the key from the vase.
        //  <<playsound door_opens>>
        //  <<wait 2>>
        <<if $mathilda == true>>
            <<emotionsprite "emotionmathilda_happy" "mt_happy">>
            <<playrestsound mathilda "mathilda">>
            Mathilda: I'm proud of you, Nanditha.
        <<endif>>
        <<set $door45 = true>>
        //<<flickerlights1>>
        <<destroyemotion "emotionnanditha_happy" "n_happy">>
        <<destroyemotion "emotionmathilda_happy" "mt_happy">>
        <<jump room5_enter>>
    <<endif>>
<<else>>
<<set $actions = $actions - 1>>
<<jump room5_enter>>
<<endif>>
===

title: door51
tags:
color: white
group: doors
position: 1209,417
---
<<if $door51 == false>>
    <<activateemotion "emotionmarzanna_idle" "mz_idle">>
    <<activateemotion "emotionnanditha_happy" "n_happy">>
    <<activateemotion "emotionmathilda_annoyed" "mt_annoyed">>
    <<activateemotion "emotionhugh_idle" "h_idle">>
    <<activateemotion "emotionhugh_angry" "h_angry">>
    <<activateemotion "emotionashok_happy" "a_happy">>
    <<activateemotion "emotionmathilda_idle" "mt_idle">>
    <<activateemotion "emotionnanditha_sad" "n_sad">>
    <<activateemotion "emotionmarzanna_afraid" "mz_afraid">>
    <<activateemotion "emotionmathilda_sad" "mt_sad">>
    <<if $key51 == false>> //if the key has not been found yet
        <<if $marzanna == true>>
            <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
            <<playrestsound marzanna "marzanna">>
            Marzanna: I don't need to try the door to know it's locked... All of them have been so far. 
        <<elseif $nanditha == true>>
            <<emotionsprite  "emotionnanditha_happy" "n_happy">>
            <<playrestsound nanditha "nanditha">>
            Nanditha: Oh, I can feel it, this is the last door we need to open. This is the final exit.
        <<elseif $mathilda == true>>
            <<emotionsprite "emotionmathilda_annoyed" "mt_annoyed">>
            <<playrestsound mathilda "mathilda">>
            Mathilda: Can't there be an unlocked door for once? How paranoid is the owner of this house?
        <<endif>>
        <<if $hugh == true>>
            <<if $item3key == true && $item5finger == false>>
                <<emotionsprite "emotionhugh_idle" "h_idle">>
                <<playrestsound hugh "hugh">>
                Hugh: Ok, I'll try my key again.
                //<<wait  2>>
                <<emotionsprite "emotionhugh_angry" "h_angry">>
                <<playrestsound hugh "hugh">>
                Hugh: Why did I even take this stupid thing with me?
                <<destroyemotion "emotionhugh_angry" "h_angry">>
            <<else>>
                <<emotionsprite "emotionhugh_idle" "h_idle">>
                <<playrestsound hugh "hugh">>
                Hugh: We should go back and search the other rooms for missing keys, too.
            <<endif>>
        <<endif>>
        <<if $ashok == true>>
            <<emotionsprite "emotionashok_happy" "a_happy">>
            <<playrestsound ashok "ashok">>
            Ashok: We were able to open all these doors so far, the right key shouldn't be so hard to find.
        <<endif>>
        <<destroyemotion "emotionmarzanna_idle" "mz_idle">>
        <<destroyemotion "emotionnanditha_happy" "n_happy">>
        <<destroyemotion "emotionmathilda_annoyed" "mt_annoyed">>
        <<destroyemotion "emotionhugh_angry" "h_angry">>
        <<destroyemotion "emotionhugh_idle" "h_idle">>
        <<destroyemotion "emotionashok_happy" "a_happy">>
        <<jump room_investigate>>
    <<else>>
        <<set $actions = $actions - 1>>
        <<if $ashok == true>>
            <<emotionsprite "emotionashok_happy" "a_happy">>
            <<playrestsound ashok "ashok">>
            Ashok: I got this!
            // <<playsound door_opens>>
            //<<wait 2>>
            <<if $nanditha == true>>
                <<emotionsprite  "emotionnanditha_happy" "n_happy">>
                <<playrestsound nanditha "nanditha">>
                Nanditha: Yes! I'm so excited!
            <<endif>>
            <<set $door51 = true>>
            <<destroyemotion "emotionashok_happy" "a_happy">>
            <<destroyemotion "emotionnanditha_happy" "n_happy">>
            <<jump room1_enter>>
        <<elseif $nanditha == true && visited("interaction5apparatus") == false && $backupkey51 == true && visited("interaction3telescope") == true>>
            <<emotionsprite  "emotionnanditha_happy" "n_happy">>
            <<playrestsound nanditha "nanditha">>
            Nanditha: I'll try the key that I found attached to the telescope.
            <<playsound door_opens>>
            //<<wait 2>>
            <<emotionsprite  "emotionnanditha_happy" "n_happy">>
            <<playrestsound nanditha "nanditha">>
            Nanditha: Yes! I'm so excited!
            <<set $door51 = true>>
            <<destroyemotion "emotionnanditha_happy" "n_happy">>
            <<jump room1_enter>>
        <<elseif visited("interaction5apparatus") == true && visited("interaction2ashok") == true>>
            <<if $mathilda == true>>
                <<emotionsprite "emotionmathilda_idle" "mt_idle">>
                <<playrestsound mathilda "mathilda">>
                Mathilda: This is they key we found on Ashok's body... let's try it.
            <<elseif $hugh == true>>
                <<emotionsprite "emotionhugh_idle" "h_idle">>
                <<playrestsound hugh "hugh">>
                Hugh: I'll try the key Ashok had with him.
            <<elseif $nanditha == true>>
                <<emotionsprite  "emotionnanditha_sad" "n_sad">>
                <<playrestsound nanditha "nanditha">>
                Nanditha: My brother's key... it must be the right one.
            <<endif>>
            //<<playsound door_opens>>
            //<<wait 2>>
            <<if $nanditha == true>>
                <<emotionsprite  "emotionnanditha_happy" "n_happy">>
                <<playrestsound nanditha "nanditha">>
                Nanditha: Yes! I'm so excited!
            <<endif>>
            <<set $door51 = true>>
            <<destroyemotion "emotionmathilda_idle" "mt_idle">>
            <<destroyemotion "emotionhugh_idle" "h_idle">>
            <<destroyemotion "emotionnanditha_sad" "n_sad">>
            <<destroyemotion "emotionnanditha_happy" "n_happy">>
            <<jump room1_enter>>
        <<elseif visited("interaction3telescope") == true && $backupkey51 == true && $nanditha == false && visited("interaction5nanditha") == true>>
            <<if $mathilda == true>>
                <<emotionsprite "emotionmathilda_sad" "mt_sad">>
                <<playrestsound mathilda "mathilda">>
                Mathilda: Nanditha found this key attached to the telescope... I'll give it a try.
            <<elseif $marzanna == true>>
                <<emotionsprite "emotionmarzanna_idle" "mz_idle">>
                <<playrestsound marzanna "marzanna">>
                Marzanna: Maybe it's the key from Nanditha's ashes...
            <<elseif $hugh == true>>
                <<emotionsprite "emotionhugh_idle" "h_idle">>
                <<playrestsound hugh "hugh">>
                Hugh: Ok door, how about tis key I retrieved from Nanditha's remains?
            <<endif>>
            <<set $door51 = true>>
            <<destroyemotion "emotionmathilda_sad" "mt_sad">>
            <<destroyemotion "emotionmarzanna_idle" "mz_idle">>
            <<destroyemotion "emotionhugh_idle" "h_idle">>
            <<jump room1_enter>>
        <<else>>
            <<if $marzanna == true>>
                <<emotionsprite "emotionmarzanna_afraid" "mz_afraid">>
                <<playrestsound marzanna "marzanna">>
                Marzanna: We are stuck, I know it! We need to go back...
                <<destroyemotion "emotionmarzanna_afraid" "mz_afraid">>
            <<endif>>
            <<jump room_investigate>>
        <<endif>>
    <<endif>>
<<else>>
    <<set $actions = $actions - 1>>
    <<jump room1_enter>>
<<endif>>
===


title: door21
tags:
color: white
group: doors
position: 185,565
---
<<set $actions = $actions - 1>>
<<disableScene5>>
    <<enableScene3>>
<<jump room_investigate>>
===

title: door32
tags:
color: white
group: doors
position: 450,565
---
<<set $actions = $actions - 1>>
// loadscene commands
<<disableScene6>>
<<enableScene5>>
<<jump room_investigate>>
===

title: door43
tags:
color: white
group: doors
position: 691,565
---
<<set $actions = $actions - 1>>
// loadscene commands
<<disableScene7>>
<<enableScene6>>

<<jump room_investigate>>
===

title: door54
tags:
color: white
group: doors
position: 947,565
---
<<set $actions = $actions - 1>>
<<disableScene8>>
<<enableScene7>>

// loadscene commands
<<jump room_investigate>>
===

title: door15
tags:
color: white
group: doors
position: -85,422
 ---
<<set $actions = $actions - 1>>
<<if visited_count("room5_enter") != 0 && visited_count("room4_enter") != 0 && visited_count("room3_enter") != 0 && visited_count("room2_enter") != 0 && visited_count("room1_enter") != 0 >>
<<enableScene8>>
<<disableScene3>>
<<else>>
Nothing there...
<<endif>>
<<jump room_investigate>>
===


title: killed_everyone
tags:
color: white
group: ending
position: 539,-1511
---
Whoops! You got them all killed. Try again!
<<GameOverenable>>
<<wait  2>>
<<GameOverdisable>>
<<Playagain>>
//<<jump start_menu>>
===

title: monster_wins
tags:
color: white
group: ending
position: 539,-1373
---
The creature catched everyone, try again!
<<GameOverenable>>
<<wait  2>>
<<GameOverdisable>>
<<Playagain>>
//<<jump start_menu>>
===

title: escape
tags:
color: white
group: ending
position: 539,-1234
---
<<if $marzanna == true && $hugh == true && $mathilda == true && $nanditha == true && $ashok == true>>
Incredible! Everyone escaped unharmed!
<<Winscreen>>
<<else>>
Congratulations! Someone actually escaped!
<<Winscreen>>
<<endif>>
//<<jump start_menu>>
===